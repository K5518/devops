import{j as e}from"./jsx-runtime.BPj4-Rfu.js";import{r as a}from"./index.SSXOyoI7.js";import{i as f}from"./jwt.M546E6_Y.js";import{l as g}from"./navigation.Bz95h8j7.js";import{c}from"./createLucideIcon.BSeNqbob.js";import{U as x}from"./users-round.BTvwdRzC.js";import{P as u}from"./plus.CTO3G_jS.js";import{M as j}from"./map.B4ShPy-O.js";import{c as d}from"./team.B3mFytyj.js";import{a as w}from"./http.B-35sOsF.js";import{u as N}from"./use-toast.CK2mpur1.js";import{u as v}from"./index.zDCl-MiS.js";import{U as y}from"./users.Bbp4l6RX.js";import{u as b}from"./use-outside-click.BWzraQDw.js";import{C as k}from"./CreateRoadmapModal.BP3xEv1m.js";import{C}from"./chevron-down.QjzaI2EQ.js";import"./index.Bhz7cRIx.js";import"./index.CEvxOxeV.js";import"./toast.BGQI3kl5.js";import"./Modal.578cTUuR.js";import"./use-keydown.DCIacX8c.js";import"./classname.VuY_V_HN.js";import"./bundle-mjs.CZZD-8Ii.js";import"./loader-2.BHhQR-Hp.js";/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=c("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=c("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=c("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=c("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);function S(o){const{setIsTeamsOpen:l,onCreateRoadmap:r}=o;return a.useState(!1),e.jsxs("ul",{children:[e.jsx("li",{className:"px-1",children:e.jsxs("a",{href:"/account",className:"group flex items-center gap-2 rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(T,{className:"h-4 w-4 stroke-[2.5px] text-slate-400 group-hover:text-white"}),"Profile"]})}),e.jsx("li",{className:"px-1",children:e.jsxs("a",{href:"/account/friends",className:"group flex items-center gap-2 rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(x,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Friends"]})}),e.jsx("li",{className:"mt-1 border-t border-t-gray-700/60 px-1 pt-1",children:e.jsxs("button",{onClick:()=>{r()},className:"group flex w-full items-center gap-2 rounded py-2 pl-3 pr-2 text-left text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(u,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"New Roadmap"]})}),e.jsx("li",{className:"border-b border-b-gray-700/60 px-1 pb-1",children:e.jsxs("a",{href:"/account/roadmaps",className:"group flex items-center gap-2 rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(j,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Roadmaps"]})}),e.jsx("li",{className:"px-1 pt-1",children:e.jsxs("button",{className:"group flex w-full items-center justify-between rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",onClick:()=>l(!0),children:[e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx(x,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Teams"]}),e.jsx(L,{className:"h-4 w-4 shrink-0 stroke-[2.5px] text-slate-400 group-hover:text-white"})]})}),e.jsx("li",{className:"px-1",children:e.jsxs("button",{className:"group flex gap-2 items-center w-full rounded py-2 pl-3 pr-2 text-left text-sm font-medium text-slate-100 hover:bg-slate-700",type:"button",onClick:g,children:[e.jsx(I,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Logout"]})})]})}function O(o){const{setIsTeamsOpen:l}=o,r=N(),i=v(d),[s,m]=a.useState(!0);async function p(){if(i.length>0)return;m(!0);const{response:t,error:n}=await w("https://api.roadmap.sh/v1-get-user-teams");if(n||!t){r.error(n?.message||"Something went wrong");return}d.set(t)}a.useEffect(()=>{p().finally(()=>m(!1))},[]);const h=s&&e.jsxs("div",{className:"mt-2 flex animate-pulse flex-col gap-1 px-1 text-center",children:[e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"}),e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"}),e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("button",{className:"mt-1 flex h-5 w-5 items-center justify-center rounded text-slate-400 hover:bg-slate-50/10 hover:text-slate-50",onClick:()=>l(!1),children:e.jsx(R,{className:"h-4 w-4 stroke-[2.5px]"})}),e.jsx("a",{className:"mt-1 flex h-5 w-5 items-center justify-center rounded text-slate-400 hover:bg-slate-50/10 hover:text-slate-50",href:"/team/new",children:e.jsx(u,{className:"h-4 w-4 stroke-[2.5px]"})})]}),h,!s&&e.jsxs("ul",{className:"mt-2",children:[i?.map(t=>{let n="";return t.status==="invited"?n=`/respond-invite?i=${t.memberId}`:t.status==="joined"&&(n=`/team/progress?t=${t._id}`),e.jsx("li",{className:"px-1",children:e.jsx("a",{href:n,className:"block truncate rounded px-4 py-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:t.name})},t._id)}),i.length===0&&!s&&e.jsx("li",{className:"mt-2 px-1 text-center",children:e.jsxs("p",{className:"block rounded px-4 py-2 text-sm font-medium text-slate-500",children:[e.jsx(y,{className:"mx-auto mb-2 h-7 w-7 text-slate-600"}),"No teams found."," ",e.jsx("a",{className:"font-medium text-slate-400 underline underline-offset-2 hover:text-slate-300",href:"/team/new",children:"Create a team"}),"."]})})]})]})}function se(){const o=a.useRef(null),[l,r]=a.useState(!1),[i,s]=a.useState(!1),[m,p]=a.useState(!1);return b(o,()=>{r(!1),s(!1)}),f()?e.jsxs("div",{className:"relative z-50 animate-fade-in",children:[m&&e.jsx(k,{onClose:()=>{p(!1)}}),e.jsxs("button",{className:"flex h-8 w-40 items-center justify-center gap-1.5 rounded-full bg-gradient-to-r from-purple-500 to-purple-700 px-4 py-2 text-sm font-medium text-white hover:from-purple-500 hover:to-purple-600",onClick:()=>{s(!1),r(!l)},children:[e.jsxs("span",{className:"inline-flex items-center",children:["Account ",e.jsx("span",{className:"text-gray-300",children:"/"})," Teams"]}),e.jsx(C,{className:"h-4 w-4 shrink-0 stroke-[2.5px]"})]}),l&&e.jsx("div",{ref:o,className:"absolute right-0 z-50 mt-2 min-h-[152px] w-48 rounded-md bg-slate-800 py-1 shadow-xl",children:i?e.jsx(O,{setIsTeamsOpen:s}):e.jsx(S,{onCreateRoadmap:()=>{p(!0),r(!1)},setIsTeamsOpen:s})})]}):null}export{se as AccountDropdown};

import{j as S}from"./jsx-runtime.BPj4-Rfu.js";import{g as yn,r as ht}from"./index.SSXOyoI7.js";/* empty css                       */import{u as kn}from"./use-toast.CK2mpur1.js";import{q as yt,o as Pt,w as ve,x as he,y as bn,A as pe,B as wn,t as it}from"./use-editor.BwWrbxG2.js";import{r as Sn}from"./dom.DTPLKm7E.js";import{i as Gt,r as En}from"./jwt.CPeqYXpJ.js";import{s as Yt}from"./popup.CdCAhVM2.js";import{c as Bt}from"./classname.VuY_V_HN.js";import{c as Ue}from"./createLucideIcon.BSeNqbob.js";import{B as We}from"./ban.DH_Dz_gD.js";import{S as In}from"./Spinner.B1Yt5gOc.js";import{ShareRoadmapButton as zn}from"./ShareRoadmapButton.Be-_90xy.js";import{h as Cn,a as fe}from"./http.BuCmuCAv.js";import{p as zt}from"./page.C3ddTGlS.js";import{g as Tn,d as An,s as Pn}from"./browser.DS5mYzWA.js";import{a as Fn}from"./download-image.DugWrjuw.js";import{S as jn}from"./square-pen.Cmhk_zGy.js";import"./toast.BGQI3kl5.js";import"./index.CEvxOxeV.js";import"./index.v_sgd_GK.js";import"./bundle-mjs.CZZD-8Ii.js";import"./use-outside-click.BWzraQDw.js";import"./use-copy-text.i66JXdki.js";import"./index.zDCl-MiS.js";import"./Modal.578cTUuR.js";import"./use-keydown.DCIacX8c.js";import"./roadmap.SDi3zlny.js";import"./index.Bhz7cRIx.js";import"./linkedin.DcgRZAME.js";import"./copy.ox-RWvwE.js";/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=Ue("Wand",[["path",{d:"M15 4V2",key:"z1p9b7"}],["path",{d:"M15 16v-2",key:"px0unx"}],["path",{d:"M8 9h2",key:"1g203m"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M17.8 11.8 19 13",key:"yihg8r"}],["path",{d:"M15 9h0",key:"kg5t1u"}],["path",{d:"M17.8 6.2 19 5",key:"fd4us0"}],["path",{d:"m3 21 9-9",key:"1jfql5"}],["path",{d:"M12.2 6.2 11 5",key:"i3da3b"}]]);function de(t){if(t)throw t}var Lt=Object.prototype.hasOwnProperty,Ge=Object.prototype.toString,me=Object.defineProperty,ge=Object.getOwnPropertyDescriptor,xe=function(e){return typeof Array.isArray=="function"?Array.isArray(e):Ge.call(e)==="[object Array]"},ye=function(e){if(!e||Ge.call(e)!=="[object Object]")return!1;var n=Lt.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&Lt.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;var r;for(r in e);return typeof r>"u"||Lt.call(e,r)},ke=function(e,n){me&&n.name==="__proto__"?me(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},be=function(e,n){if(n==="__proto__")if(Lt.call(e,n)){if(ge)return ge(e,n).value}else return;return e[n]},_n=function t(){var e,n,i,r,a,s,o=arguments[0],u=1,l=arguments.length,p=!1;for(typeof o=="boolean"&&(p=o,o=arguments[1]||{},u=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});u<l;++u)if(e=arguments[u],e!=null)for(n in e)i=be(o,n),r=be(e,n),o!==r&&(p&&r&&(ye(r)||(a=xe(r)))?(a?(a=!1,s=i&&xe(i)?i:[]):s=i&&ye(i)?i:{},ke(o,{name:n,newValue:t(p,s,r)})):typeof r<"u"&&ke(o,{name:n,newValue:r}));return o};const Mt=yn(_n);function Xt(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Bn(){const t=[],e={run:n,use:i};return e;function n(...r){let a=-1;const s=r.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);o(null,...r);function o(u,...l){const p=t[++a];let h=-1;if(u){s(u);return}for(;++h<r.length;)(l[h]===null||l[h]===void 0)&&(l[h]=r[h]);r=l,p?Nn(p,o)(...l):s(null,...l)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function Nn(t,e){let n;return i;function i(...s){const o=t.length>s.length;let u;o&&s.push(r);try{u=t.apply(this,s)}catch(l){const p=l;if(o&&n)throw p;return r(p)}o||(u&&u.then&&typeof u.then=="function"?u.then(a,r):u instanceof Error?r(u):a(u))}function r(s,...o){n||(n=!0,e(s,...o))}function a(s){r(null,s)}}function Tt(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?we(t.position):"start"in t||"end"in t?we(t):"line"in t||"column"in t?Zt(t):""}function Zt(t){return Se(t&&t.line)+":"+Se(t&&t.column)}function we(t){return Zt(t&&t.start)+"-"+Zt(t&&t.end)}function Se(t){return t&&typeof t=="number"?t:1}class Y extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",a={},s=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?r=e:!a.cause&&e&&(s=!0,r=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof i=="string"){const u=i.indexOf(":");u===-1?a.ruleId=i:(a.source=i.slice(0,u),a.ruleId=i.slice(u+1))}if(!a.place&&a.ancestors&&a.ancestors){const u=a.ancestors[a.ancestors.length-1];u&&(a.place=u.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=o?o.line:void 0,this.name=Tt(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}Y.prototype.file="";Y.prototype.name="";Y.prototype.reason="";Y.prototype.message="";Y.prototype.stack="";Y.prototype.column=void 0;Y.prototype.line=void 0;Y.prototype.ancestors=void 0;Y.prototype.cause=void 0;Y.prototype.fatal=void 0;Y.prototype.place=void 0;Y.prototype.ruleId=void 0;Y.prototype.source=void 0;const rt={basename:Rn,dirname:Mn,extname:On,join:Dn,sep:"/"};function Rn(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ft(t);let n=0,i=-1,r=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(a){n=r+1;break}}else i<0&&(a=!0,i=r+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let s=-1,o=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(a){n=r+1;break}}else s<0&&(a=!0,s=r+1),o>-1&&(t.codePointAt(r)===e.codePointAt(o--)?o<0&&(i=r):(o=-1,i=s));return n===i?i=s:i<0&&(i=t.length),t.slice(n,i)}function Mn(t){if(Ft(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function On(t){Ft(t);let e=t.length,n=-1,i=0,r=-1,a=0,s;for(;e--;){const o=t.codePointAt(e);if(o===47){if(s){i=e+1;break}continue}n<0&&(s=!0,n=e+1),o===46?r<0?r=e:a!==1&&(a=1):r>-1&&(a=-1)}return r<0||n<0||a===0||a===1&&r===n-1&&r===i+1?"":t.slice(r,n)}function Dn(...t){let e=-1,n;for(;++e<t.length;)Ft(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Hn(n)}function Hn(t){Ft(t);const e=t.codePointAt(0)===47;let n=qn(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function qn(t,e){let n="",i=0,r=-1,a=0,s=-1,o,u;for(;++s<=t.length;){if(s<t.length)o=t.codePointAt(s);else{if(o===47)break;o=47}if(o===47){if(!(r===s-1||a===1))if(r!==s-1&&a===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",i=0):(n=n.slice(0,u),i=n.length-1-n.lastIndexOf("/")),r=s,a=0;continue}}else if(n.length>0){n="",i=0,r=s,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(r+1,s):n=t.slice(r+1,s),i=s-r-1;r=s,a=0}else o===46&&a>-1?a++:a=-1}return n}function Ft(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Vn={cwd:$n};function $n(){return"/"}function Jt(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function vn(t){if(typeof t=="string")t=new URL(t);else if(!Jt(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Un(t)}function Un(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const Ot=["history","path","basename","stem","extname","dirname"];class Wn{constructor(e){let n;e?Jt(e)?n={path:e}:typeof e=="string"||Qn(e)?n={value:e}:n=e:n={},this.cwd=Vn.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<Ot.length;){const a=Ot[i];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let r;for(r in n)Ot.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?rt.basename(this.path):void 0}set basename(e){Ht(e,"basename"),Dt(e,"basename"),this.path=rt.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?rt.dirname(this.path):void 0}set dirname(e){Ee(this.basename,"dirname"),this.path=rt.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?rt.extname(this.path):void 0}set extname(e){if(Dt(e,"extname"),Ee(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=rt.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Jt(e)&&(e=vn(e)),Ht(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?rt.basename(this.path,this.extname):void 0}set stem(e){Ht(e,"stem"),Dt(e,"stem"),this.path=rt.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const r=this.message(e,n,i);throw r.fatal=!0,r}info(e,n,i){const r=this.message(e,n,i);return r.fatal=void 0,r}message(e,n,i){const r=new Y(e,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Dt(t,e){if(t&&t.includes(rt.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+rt.sep+"`")}function Ht(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Ee(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Qn(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Gn=function(t){const i=this.constructor.prototype,r=i[t],a=function(){return r.apply(a,arguments)};Object.setPrototypeOf(a,i);const s=Object.getOwnPropertyNames(r);for(const o of s){const u=Object.getOwnPropertyDescriptor(r,o);u&&Object.defineProperty(a,o,u)}return a},Yn={}.hasOwnProperty;class ne extends Gn{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Bn()}copy(){const e=new ne;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(Mt(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?($t("data",this.frozen),this.namespace[e]=n,this):Yn.call(this.namespace,e)&&this.namespace[e]||void 0:e?($t("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=jt(e),i=this.parser||this.Parser;return qt("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),qt("process",this.parser||this.Parser),Vt("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(a,s){const o=jt(e),u=i.parse(o);i.run(u,o,function(p,h,m){if(p||!h||!m)return l(p);const c=h,C=i.stringify(c,m);Jn(C)?m.value=C:m.result=C,l(p,m)});function l(p,h){p||!h?s(p):a?a(h):n(void 0,h)}}}processSync(e){let n=!1,i;return this.freeze(),qt("processSync",this.parser||this.Parser),Vt("processSync",this.compiler||this.Compiler),this.process(e,r),ze("processSync","process",n),i;function r(a,s){n=!0,de(a),i=s}}run(e,n,i){Ie(e),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?a(void 0,i):new Promise(a);function a(s,o){const u=jt(n);r.run(e,u,l);function l(p,h,m){const c=h||e;p?o(p):s?s(c):i(void 0,c,m)}}}runSync(e,n){let i=!1,r;return this.run(e,n,a),ze("runSync","run",i),r;function a(s,o){de(s),r=o,i=!0}}stringify(e,n){this.freeze();const i=jt(n),r=this.compiler||this.Compiler;return Vt("stringify",r),Ie(e),r(e,i)}use(e,...n){const i=this.attachers,r=this.namespace;if($t("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?o(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[p,...h]=l;u(p,h)}else s(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function s(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(l.plugins),l.settings&&(r.settings=Mt(!0,r.settings,l.settings))}function o(l){let p=-1;if(l!=null)if(Array.isArray(l))for(;++p<l.length;){const h=l[p];a(h)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,p){let h=-1,m=-1;for(;++h<i.length;)if(i[h][0]===l){m=h;break}if(m===-1)i.push([l,...p]);else if(p.length>0){let[c,...C]=p;const P=i[m][1];Xt(P)&&Xt(c)&&(c=Mt(!0,P,c)),i[m]=[l,c,...C]}}}}const Xn=new ne().freeze();function qt(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Vt(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function $t(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ie(t){if(!Xt(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function ze(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function jt(t){return Zn(t)?t:new Wn(t)}function Zn(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Jn(t){return typeof t=="string"||Kn(t)}function Kn(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const ti={};function ei(t,e){const n=e||ti,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Ye(t,i,r)}function Ye(t,e,n){if(ni(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Ce(t.children,e,n)}return Array.isArray(t)?Ce(t,e,n):""}function Ce(t,e,n){const i=[];let r=-1;for(;++r<t.length;)i[r]=Ye(t[r],e,n);return i.join("")}function ni(t){return!!(t&&typeof t=="object")}const Te=document.createElement("i");function ie(t){const e="&"+t+";";Te.innerHTML=e;const n=Te.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function st(t,e,n,i){const r=t.length;let a=0,s;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,i.length<1e4)s=Array.from(i),s.unshift(e,n),t.splice(...s);else for(n&&t.splice(e,n);a<i.length;)s=i.slice(a,a+1e4),s.unshift(e,0),t.splice(...s),a+=1e4,e+=1e4}function Z(t,e){return t.length>0?(st(t,t.length,0,e),t):e}const Ae={}.hasOwnProperty;function ii(t){const e={};let n=-1;for(;++n<t.length;)ri(e,t[n]);return e}function ri(t,e){let n;for(n in e){const r=(Ae.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let s;if(a)for(s in a){Ae.call(r,s)||(r[s]=[]);const o=a[s];ai(r[s],Array.isArray(o)?o:o?[o]:[])}}}function ai(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);st(t,0,0,i)}function Xe(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ï¿½":String.fromCodePoint(n)}function wt(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const at=dt(/[A-Za-z]/),nt=dt(/[\dA-Za-z]/),si=dt(/[#-'*+\--9=?A-Z^-~]/);function Kt(t){return t!==null&&(t<32||t===127)}const te=dt(/\d/),oi=dt(/[\dA-Fa-f]/),li=dt(/[!-/:-@[-`{-~]/);function z(t){return t!==null&&t<-2}function G(t){return t!==null&&(t<0||t===32)}function N(t){return t===-2||t===-1||t===32}const ui=dt(/\p{P}|\p{S}/u),ci=dt(/\s/);function dt(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function D(t,e,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(u){return N(u)?(t.enter(n),o(u)):e(u)}function o(u){return N(u)&&a++<r?(t.consume(u),o):(t.exit(n),e(u))}}const hi={tokenize:pi};function pi(t){const e=t.attempt(this.parser.constructs.contentInitial,i,r);let n;return e;function i(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),D(t,e,"linePrefix")}function r(o){return t.enter("paragraph"),a(o)}function a(o){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,s(o)}function s(o){if(o===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(o);return}return z(o)?(t.consume(o),t.exit("chunkText"),a):(t.consume(o),s)}}const fi={tokenize:di},Pe={tokenize:mi};function di(t){const e=this,n=[];let i=0,r,a,s;return o;function o(b){if(i<n.length){const _=n[i];return e.containerState=_[1],t.attempt(_[0].continuation,u,l)(b)}return l(b)}function u(b){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&O();const _=e.events.length;let H=_,x;for(;H--;)if(e.events[H][0]==="exit"&&e.events[H][1].type==="chunkFlow"){x=e.events[H][1].end;break}y(i);let T=_;for(;T<e.events.length;)e.events[T][1].end=Object.assign({},x),T++;return st(e.events,H+1,0,e.events.slice(_)),e.events.length=T,l(b)}return o(b)}function l(b){if(i===n.length){if(!r)return m(b);if(r.currentConstruct&&r.currentConstruct.concrete)return C(b);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Pe,p,h)(b)}function p(b){return r&&O(),y(i),m(b)}function h(b){return e.parser.lazy[e.now().line]=i!==n.length,s=e.now().offset,C(b)}function m(b){return e.containerState={},t.attempt(Pe,c,C)(b)}function c(b){return i++,n.push([e.currentConstruct,e.containerState]),m(b)}function C(b){if(b===null){r&&O(),y(0),t.consume(b);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{contentType:"flow",previous:a,_tokenizer:r}),P(b)}function P(b){if(b===null){R(t.exit("chunkFlow"),!0),y(0),t.consume(b);return}return z(b)?(t.consume(b),R(t.exit("chunkFlow")),i=0,e.interrupt=void 0,o):(t.consume(b),P)}function R(b,_){const H=e.sliceStream(b);if(_&&H.push(null),b.previous=a,a&&(a.next=b),a=b,r.defineSkip(b.start),r.write(H),e.parser.lazy[b.start.line]){let x=r.events.length;for(;x--;)if(r.events[x][1].start.offset<s&&(!r.events[x][1].end||r.events[x][1].end.offset>s))return;const T=e.events.length;let j=T,F,I;for(;j--;)if(e.events[j][0]==="exit"&&e.events[j][1].type==="chunkFlow"){if(F){I=e.events[j][1].end;break}F=!0}for(y(i),x=T;x<e.events.length;)e.events[x][1].end=Object.assign({},I),x++;st(e.events,j+1,0,e.events.slice(T)),e.events.length=x}}function y(b){let _=n.length;for(;_-- >b;){const H=n[_];e.containerState=H[1],H[0].exit.call(e,t)}n.length=b}function O(){r.write([null]),a=void 0,r=void 0,e.containerState._closeFlow=void 0}}function mi(t,e,n){return D(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Fe(t){if(t===null||G(t)||ci(t))return 1;if(ui(t))return 2}function re(t,e,n){const i=[];let r=-1;for(;++r<t.length;){const a=t[r].resolveAll;a&&!i.includes(a)&&(e=a(e,n),i.push(a))}return e}const ee={name:"attention",tokenize:xi,resolveAll:gi};function gi(t,e){let n=-1,i,r,a,s,o,u,l,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h=Object.assign({},t[i][1].end),m=Object.assign({},t[n][1].start);je(h,-u),je(m,u),s={type:u>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},t[i][1].end)},o={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},t[n][1].start),end:m},a={type:u>1?"strongText":"emphasisText",start:Object.assign({},t[i][1].end),end:Object.assign({},t[n][1].start)},r={type:u>1?"strong":"emphasis",start:Object.assign({},s.start),end:Object.assign({},o.end)},t[i][1].end=Object.assign({},s.start),t[n][1].start=Object.assign({},o.end),l=[],t[i][1].end.offset-t[i][1].start.offset&&(l=Z(l,[["enter",t[i][1],e],["exit",t[i][1],e]])),l=Z(l,[["enter",r,e],["enter",s,e],["exit",s,e],["enter",a,e]]),l=Z(l,re(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),l=Z(l,[["exit",a,e],["enter",o,e],["exit",o,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,l=Z(l,[["enter",t[n][1],e],["exit",t[n][1],e]])):p=0,st(t,i-1,n-i+3,l),n=i+l.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function xi(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=Fe(i);let a;return s;function s(u){return a=u,t.enter("attentionSequence"),o(u)}function o(u){if(u===a)return t.consume(u),o;const l=t.exit("attentionSequence"),p=Fe(u),h=!p||p===2&&r||n.includes(u),m=!r||r===2&&p||n.includes(i);return l._open=!!(a===42?h:h&&(r||!m)),l._close=!!(a===42?m:m&&(p||!h)),e(u)}}function je(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const yi={name:"autolink",tokenize:ki};function ki(t,e,n){let i=0;return r;function r(c){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(c),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(c){return at(c)?(t.consume(c),s):l(c)}function s(c){return c===43||c===45||c===46||nt(c)?(i=1,o(c)):l(c)}function o(c){return c===58?(t.consume(c),i=0,u):(c===43||c===45||c===46||nt(c))&&i++<32?(t.consume(c),o):(i=0,l(c))}function u(c){return c===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(c),t.exit("autolinkMarker"),t.exit("autolink"),e):c===null||c===32||c===60||Kt(c)?n(c):(t.consume(c),u)}function l(c){return c===64?(t.consume(c),p):si(c)?(t.consume(c),l):n(c)}function p(c){return nt(c)?h(c):n(c)}function h(c){return c===46?(t.consume(c),i=0,p):c===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(c),t.exit("autolinkMarker"),t.exit("autolink"),e):m(c)}function m(c){if((c===45||nt(c))&&i++<63){const C=c===45?m:h;return t.consume(c),C}return n(c)}}const Nt={tokenize:bi,partial:!0};function bi(t,e,n){return i;function i(a){return N(a)?D(t,r,"linePrefix")(a):r(a)}function r(a){return a===null||z(a)?e(a):n(a)}}const Ze={name:"blockQuote",tokenize:wi,continuation:{tokenize:Si},exit:Ei};function wi(t,e,n){const i=this;return r;function r(s){if(s===62){const o=i.containerState;return o.open||(t.enter("blockQuote",{_container:!0}),o.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(s),t.exit("blockQuoteMarker"),a}return n(s)}function a(s){return N(s)?(t.enter("blockQuotePrefixWhitespace"),t.consume(s),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(s))}}function Si(t,e,n){const i=this;return r;function r(s){return N(s)?D(t,a,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return t.attempt(Ze,e,n)(s)}}function Ei(t){t.exit("blockQuote")}const Je={name:"characterEscape",tokenize:Ii};function Ii(t,e,n){return i;function i(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),r}function r(a){return li(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const Ke={name:"characterReference",tokenize:zi};function zi(t,e,n){const i=this;let r=0,a,s;return o;function o(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),u}function u(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),l):(t.enter("characterReferenceValue"),a=31,s=nt,p(h))}function l(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,s=oi,p):(t.enter("characterReferenceValue"),a=7,s=te,p(h))}function p(h){if(h===59&&r){const m=t.exit("characterReferenceValue");return s===nt&&!ie(i.sliceSerialize(m))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return s(h)&&r++<a?(t.consume(h),p):n(h)}}const Le={tokenize:Ti,partial:!0},_e={name:"codeFenced",tokenize:Ci,concrete:!0};function Ci(t,e,n){const i=this,r={tokenize:H,partial:!0};let a=0,s=0,o;return u;function u(x){return l(x)}function l(x){const T=i.events[i.events.length-1];return a=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,o=x,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p(x)}function p(x){return x===o?(s++,t.consume(x),p):s<3?n(x):(t.exit("codeFencedFenceSequence"),N(x)?D(t,h,"whitespace")(x):h(x))}function h(x){return x===null||z(x)?(t.exit("codeFencedFence"),i.interrupt?e(x):t.check(Le,P,_)(x)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===null||z(x)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(x)):N(x)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),D(t,c,"whitespace")(x)):x===96&&x===o?n(x):(t.consume(x),m)}function c(x){return x===null||z(x)?h(x):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),C(x))}function C(x){return x===null||z(x)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(x)):x===96&&x===o?n(x):(t.consume(x),C)}function P(x){return t.attempt(r,_,R)(x)}function R(x){return t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),y}function y(x){return a>0&&N(x)?D(t,O,"linePrefix",a+1)(x):O(x)}function O(x){return x===null||z(x)?t.check(Le,P,_)(x):(t.enter("codeFlowValue"),b(x))}function b(x){return x===null||z(x)?(t.exit("codeFlowValue"),O(x)):(t.consume(x),b)}function _(x){return t.exit("codeFenced"),e(x)}function H(x,T,j){let F=0;return I;function I(B){return x.enter("lineEnding"),x.consume(B),x.exit("lineEnding"),w}function w(B){return x.enter("codeFencedFence"),N(B)?D(x,E,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):E(B)}function E(B){return B===o?(x.enter("codeFencedFenceSequence"),q(B)):j(B)}function q(B){return B===o?(F++,x.consume(B),q):F>=s?(x.exit("codeFencedFenceSequence"),N(B)?D(x,V,"whitespace")(B):V(B)):j(B)}function V(B){return B===null||z(B)?(x.exit("codeFencedFence"),T(B)):j(B)}}}function Ti(t,e,n){const i=this;return r;function r(s){return s===null?n(s):(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),a)}function a(s){return i.parser.lazy[i.now().line]?n(s):e(s)}}const vt={name:"codeIndented",tokenize:Pi},Ai={tokenize:Fi,partial:!0};function Pi(t,e,n){const i=this;return r;function r(l){return t.enter("codeIndented"),D(t,a,"linePrefix",5)(l)}function a(l){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?s(l):n(l)}function s(l){return l===null?u(l):z(l)?t.attempt(Ai,s,u)(l):(t.enter("codeFlowValue"),o(l))}function o(l){return l===null||z(l)?(t.exit("codeFlowValue"),s(l)):(t.consume(l),o)}function u(l){return t.exit("codeIndented"),e(l)}}function Fi(t,e,n){const i=this;return r;function r(s){return i.parser.lazy[i.now().line]?n(s):z(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),r):D(t,a,"linePrefix",5)(s)}function a(s){const o=i.events[i.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(s):z(s)?r(s):n(s)}}const ji={name:"codeText",tokenize:Bi,resolve:Li,previous:_i};function Li(t){let e=t.length-4,n=3,i,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)r===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(r=i):(i===e||t[i][1].type==="lineEnding")&&(t[r][1].type="codeTextData",i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return t}function _i(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Bi(t,e,n){let i=0,r,a;return s;function s(h){return t.enter("codeText"),t.enter("codeTextSequence"),o(h)}function o(h){return h===96?(t.consume(h),i++,o):(t.exit("codeTextSequence"),u(h))}function u(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),u):h===96?(a=t.enter("codeTextSequence"),r=0,p(h)):z(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),u):(t.enter("codeTextData"),l(h))}function l(h){return h===null||h===32||h===96||z(h)?(t.exit("codeTextData"),u(h)):(t.consume(h),l)}function p(h){return h===96?(t.consume(h),r++,p):r===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(a.type="codeTextData",l(h))}}function tn(t){const e={};let n=-1,i,r,a,s,o,u,l;for(;++n<t.length;){for(;n in e;)n=e[n];if(i=t[n],n&&i[1].type==="chunkFlow"&&t[n-1][1].type==="listItemPrefix"&&(u=i[1]._tokenizer.events,a=0,a<u.length&&u[a][1].type==="lineEndingBlank"&&(a+=2),a<u.length&&u[a][1].type==="content"))for(;++a<u.length&&u[a][1].type!=="content";)u[a][1].type==="chunkText"&&(u[a][1]._isInFirstContentOfListItem=!0,a++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,Ni(t,n)),n=e[n],l=!0);else if(i[1]._container){for(a=n,r=void 0;a--&&(s=t[a],s[1].type==="lineEnding"||s[1].type==="lineEndingBlank");)s[0]==="enter"&&(r&&(t[r][1].type="lineEndingBlank"),s[1].type="lineEnding",r=a);r&&(i[1].end=Object.assign({},t[r][1].start),o=t.slice(r,n),o.unshift(i),st(t,r,n-r+1,o))}}return!l}function Ni(t,e){const n=t[e][1],i=t[e][2];let r=e-1;const a=[],s=n._tokenizer||i.parser[n.contentType](n.start),o=s.events,u=[],l={};let p,h,m=-1,c=n,C=0,P=0;const R=[P];for(;c;){for(;t[++r][1]!==c;);a.push(r),c._tokenizer||(p=i.sliceStream(c),c.next||p.push(null),h&&s.defineSkip(c.start),c._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(p),c._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),h=c,c=c.next}for(c=n;++m<o.length;)o[m][0]==="exit"&&o[m-1][0]==="enter"&&o[m][1].type===o[m-1][1].type&&o[m][1].start.line!==o[m][1].end.line&&(P=m+1,R.push(P),c._tokenizer=void 0,c.previous=void 0,c=c.next);for(s.events=[],c?(c._tokenizer=void 0,c.previous=void 0):R.pop(),m=R.length;m--;){const y=o.slice(R[m],R[m+1]),O=a.pop();u.unshift([O,O+y.length-1]),st(t,O,2,y)}for(m=-1;++m<u.length;)l[C+u[m][0]]=C+u[m][1],C+=u[m][1]-u[m][0]-1;return l}const Ri={tokenize:Di,resolve:Oi},Mi={tokenize:Hi,partial:!0};function Oi(t){return tn(t),t}function Di(t,e){let n;return i;function i(o){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(o)}function r(o){return o===null?a(o):z(o)?t.check(Mi,s,a)(o):(t.consume(o),r)}function a(o){return t.exit("chunkContent"),t.exit("content"),e(o)}function s(o){return t.consume(o),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function Hi(t,e,n){const i=this;return r;function r(s){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),D(t,a,"linePrefix")}function a(s){if(s===null||z(s))return n(s);const o=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(s):t.interrupt(i.parser.constructs.flow,n,e)(s)}}function en(t,e,n,i,r,a,s,o,u){const l=u||Number.POSITIVE_INFINITY;let p=0;return h;function h(y){return y===60?(t.enter(i),t.enter(r),t.enter(a),t.consume(y),t.exit(a),m):y===null||y===32||y===41||Kt(y)?n(y):(t.enter(i),t.enter(s),t.enter(o),t.enter("chunkString",{contentType:"string"}),P(y))}function m(y){return y===62?(t.enter(a),t.consume(y),t.exit(a),t.exit(r),t.exit(i),e):(t.enter(o),t.enter("chunkString",{contentType:"string"}),c(y))}function c(y){return y===62?(t.exit("chunkString"),t.exit(o),m(y)):y===null||y===60||z(y)?n(y):(t.consume(y),y===92?C:c)}function C(y){return y===60||y===62||y===92?(t.consume(y),c):c(y)}function P(y){return!p&&(y===null||y===41||G(y))?(t.exit("chunkString"),t.exit(o),t.exit(s),t.exit(i),e(y)):p<l&&y===40?(t.consume(y),p++,P):y===41?(t.consume(y),p--,P):y===null||y===32||y===40||Kt(y)?n(y):(t.consume(y),y===92?R:P)}function R(y){return y===40||y===41||y===92?(t.consume(y),P):P(y)}}function nn(t,e,n,i,r,a){const s=this;let o=0,u;return l;function l(c){return t.enter(i),t.enter(r),t.consume(c),t.exit(r),t.enter(a),p}function p(c){return o>999||c===null||c===91||c===93&&!u||c===94&&!o&&"_hiddenFootnoteSupport"in s.parser.constructs?n(c):c===93?(t.exit(a),t.enter(r),t.consume(c),t.exit(r),t.exit(i),e):z(c)?(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),h(c))}function h(c){return c===null||c===91||c===93||z(c)||o++>999?(t.exit("chunkString"),p(c)):(t.consume(c),u||(u=!N(c)),c===92?m:h)}function m(c){return c===91||c===92||c===93?(t.consume(c),o++,h):h(c)}}function rn(t,e,n,i,r,a){let s;return o;function o(m){return m===34||m===39||m===40?(t.enter(i),t.enter(r),t.consume(m),t.exit(r),s=m===40?41:m,u):n(m)}function u(m){return m===s?(t.enter(r),t.consume(m),t.exit(r),t.exit(i),e):(t.enter(a),l(m))}function l(m){return m===s?(t.exit(a),u(s)):m===null?n(m):z(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),D(t,l,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(m))}function p(m){return m===s||m===null||z(m)?(t.exit("chunkString"),l(m)):(t.consume(m),m===92?h:p)}function h(m){return m===s||m===92?(t.consume(m),p):p(m)}}function At(t,e){let n;return i;function i(r){return z(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,i):N(r)?D(t,i,n?"linePrefix":"lineSuffix")(r):e(r)}}const qi={name:"definition",tokenize:$i},Vi={tokenize:vi,partial:!0};function $i(t,e,n){const i=this;let r;return a;function a(c){return t.enter("definition"),s(c)}function s(c){return nn.call(i,t,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(c)}function o(c){return r=wt(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),c===58?(t.enter("definitionMarker"),t.consume(c),t.exit("definitionMarker"),u):n(c)}function u(c){return G(c)?At(t,l)(c):l(c)}function l(c){return en(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(c)}function p(c){return t.attempt(Vi,h,h)(c)}function h(c){return N(c)?D(t,m,"whitespace")(c):m(c)}function m(c){return c===null||z(c)?(t.exit("definition"),i.parser.defined.push(r),e(c)):n(c)}}function vi(t,e,n){return i;function i(o){return G(o)?At(t,r)(o):n(o)}function r(o){return rn(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return N(o)?D(t,s,"whitespace")(o):s(o)}function s(o){return o===null||z(o)?e(o):n(o)}}const Ui={name:"hardBreakEscape",tokenize:Wi};function Wi(t,e,n){return i;function i(a){return t.enter("hardBreakEscape"),t.consume(a),r}function r(a){return z(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const Qi={name:"headingAtx",tokenize:Yi,resolve:Gi};function Gi(t,e){let n=t.length-2,i=3,r,a;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},a={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},st(t,i,n-i+1,[["enter",r,e],["enter",a,e],["exit",a,e],["exit",r,e]])),t}function Yi(t,e,n){let i=0;return r;function r(p){return t.enter("atxHeading"),a(p)}function a(p){return t.enter("atxHeadingSequence"),s(p)}function s(p){return p===35&&i++<6?(t.consume(p),s):p===null||G(p)?(t.exit("atxHeadingSequence"),o(p)):n(p)}function o(p){return p===35?(t.enter("atxHeadingSequence"),u(p)):p===null||z(p)?(t.exit("atxHeading"),e(p)):N(p)?D(t,o,"whitespace")(p):(t.enter("atxHeadingText"),l(p))}function u(p){return p===35?(t.consume(p),u):(t.exit("atxHeadingSequence"),o(p))}function l(p){return p===null||p===35||G(p)?(t.exit("atxHeadingText"),o(p)):(t.consume(p),l)}}const Xi=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Be=["pre","script","style","textarea"],Zi={name:"htmlFlow",tokenize:er,resolveTo:tr,concrete:!0},Ji={tokenize:ir,partial:!0},Ki={tokenize:nr,partial:!0};function tr(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function er(t,e,n){const i=this;let r,a,s,o,u;return l;function l(d){return p(d)}function p(d){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(d),h}function h(d){return d===33?(t.consume(d),m):d===47?(t.consume(d),a=!0,P):d===63?(t.consume(d),r=3,i.interrupt?e:f):at(d)?(t.consume(d),s=String.fromCharCode(d),R):n(d)}function m(d){return d===45?(t.consume(d),r=2,c):d===91?(t.consume(d),r=5,o=0,C):at(d)?(t.consume(d),r=4,i.interrupt?e:f):n(d)}function c(d){return d===45?(t.consume(d),i.interrupt?e:f):n(d)}function C(d){const tt="CDATA[";return d===tt.charCodeAt(o++)?(t.consume(d),o===tt.length?i.interrupt?e:E:C):n(d)}function P(d){return at(d)?(t.consume(d),s=String.fromCharCode(d),R):n(d)}function R(d){if(d===null||d===47||d===62||G(d)){const tt=d===47,mt=s.toLowerCase();return!tt&&!a&&Be.includes(mt)?(r=1,i.interrupt?e(d):E(d)):Xi.includes(s.toLowerCase())?(r=6,tt?(t.consume(d),y):i.interrupt?e(d):E(d)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(d):a?O(d):b(d))}return d===45||nt(d)?(t.consume(d),s+=String.fromCharCode(d),R):n(d)}function y(d){return d===62?(t.consume(d),i.interrupt?e:E):n(d)}function O(d){return N(d)?(t.consume(d),O):I(d)}function b(d){return d===47?(t.consume(d),I):d===58||d===95||at(d)?(t.consume(d),_):N(d)?(t.consume(d),b):I(d)}function _(d){return d===45||d===46||d===58||d===95||nt(d)?(t.consume(d),_):H(d)}function H(d){return d===61?(t.consume(d),x):N(d)?(t.consume(d),H):b(d)}function x(d){return d===null||d===60||d===61||d===62||d===96?n(d):d===34||d===39?(t.consume(d),u=d,T):N(d)?(t.consume(d),x):j(d)}function T(d){return d===u?(t.consume(d),u=null,F):d===null||z(d)?n(d):(t.consume(d),T)}function j(d){return d===null||d===34||d===39||d===47||d===60||d===61||d===62||d===96||G(d)?H(d):(t.consume(d),j)}function F(d){return d===47||d===62||N(d)?b(d):n(d)}function I(d){return d===62?(t.consume(d),w):n(d)}function w(d){return d===null||z(d)?E(d):N(d)?(t.consume(d),w):n(d)}function E(d){return d===45&&r===2?(t.consume(d),U):d===60&&r===1?(t.consume(d),$):d===62&&r===4?(t.consume(d),K):d===63&&r===3?(t.consume(d),f):d===93&&r===5?(t.consume(d),ot):z(d)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(Ji,lt,q)(d)):d===null||z(d)?(t.exit("htmlFlowData"),q(d)):(t.consume(d),E)}function q(d){return t.check(Ki,V,lt)(d)}function V(d){return t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),B}function B(d){return d===null||z(d)?q(d):(t.enter("htmlFlowData"),E(d))}function U(d){return d===45?(t.consume(d),f):E(d)}function $(d){return d===47?(t.consume(d),s="",J):E(d)}function J(d){if(d===62){const tt=s.toLowerCase();return Be.includes(tt)?(t.consume(d),K):E(d)}return at(d)&&s.length<8?(t.consume(d),s+=String.fromCharCode(d),J):E(d)}function ot(d){return d===93?(t.consume(d),f):E(d)}function f(d){return d===62?(t.consume(d),K):d===45&&r===2?(t.consume(d),f):E(d)}function K(d){return d===null||z(d)?(t.exit("htmlFlowData"),lt(d)):(t.consume(d),K)}function lt(d){return t.exit("htmlFlow"),e(d)}}function nr(t,e,n){const i=this;return r;function r(s){return z(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),a):n(s)}function a(s){return i.parser.lazy[i.now().line]?n(s):e(s)}}function ir(t,e,n){return i;function i(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(Nt,e,n)}}const rr={name:"htmlText",tokenize:ar};function ar(t,e,n){const i=this;let r,a,s;return o;function o(f){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(f),u}function u(f){return f===33?(t.consume(f),l):f===47?(t.consume(f),H):f===63?(t.consume(f),b):at(f)?(t.consume(f),j):n(f)}function l(f){return f===45?(t.consume(f),p):f===91?(t.consume(f),a=0,C):at(f)?(t.consume(f),O):n(f)}function p(f){return f===45?(t.consume(f),c):n(f)}function h(f){return f===null?n(f):f===45?(t.consume(f),m):z(f)?(s=h,$(f)):(t.consume(f),h)}function m(f){return f===45?(t.consume(f),c):h(f)}function c(f){return f===62?U(f):f===45?m(f):h(f)}function C(f){const K="CDATA[";return f===K.charCodeAt(a++)?(t.consume(f),a===K.length?P:C):n(f)}function P(f){return f===null?n(f):f===93?(t.consume(f),R):z(f)?(s=P,$(f)):(t.consume(f),P)}function R(f){return f===93?(t.consume(f),y):P(f)}function y(f){return f===62?U(f):f===93?(t.consume(f),y):P(f)}function O(f){return f===null||f===62?U(f):z(f)?(s=O,$(f)):(t.consume(f),O)}function b(f){return f===null?n(f):f===63?(t.consume(f),_):z(f)?(s=b,$(f)):(t.consume(f),b)}function _(f){return f===62?U(f):b(f)}function H(f){return at(f)?(t.consume(f),x):n(f)}function x(f){return f===45||nt(f)?(t.consume(f),x):T(f)}function T(f){return z(f)?(s=T,$(f)):N(f)?(t.consume(f),T):U(f)}function j(f){return f===45||nt(f)?(t.consume(f),j):f===47||f===62||G(f)?F(f):n(f)}function F(f){return f===47?(t.consume(f),U):f===58||f===95||at(f)?(t.consume(f),I):z(f)?(s=F,$(f)):N(f)?(t.consume(f),F):U(f)}function I(f){return f===45||f===46||f===58||f===95||nt(f)?(t.consume(f),I):w(f)}function w(f){return f===61?(t.consume(f),E):z(f)?(s=w,$(f)):N(f)?(t.consume(f),w):F(f)}function E(f){return f===null||f===60||f===61||f===62||f===96?n(f):f===34||f===39?(t.consume(f),r=f,q):z(f)?(s=E,$(f)):N(f)?(t.consume(f),E):(t.consume(f),V)}function q(f){return f===r?(t.consume(f),r=void 0,B):f===null?n(f):z(f)?(s=q,$(f)):(t.consume(f),q)}function V(f){return f===null||f===34||f===39||f===60||f===61||f===96?n(f):f===47||f===62||G(f)?F(f):(t.consume(f),V)}function B(f){return f===47||f===62||G(f)?F(f):n(f)}function U(f){return f===62?(t.consume(f),t.exit("htmlTextData"),t.exit("htmlText"),e):n(f)}function $(f){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),J}function J(f){return N(f)?D(t,ot,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f):ot(f)}function ot(f){return t.enter("htmlTextData"),s(f)}}const ae={name:"labelEnd",tokenize:hr,resolveTo:cr,resolveAll:ur},sr={tokenize:pr},or={tokenize:fr},lr={tokenize:dr};function ur(t){let e=-1;for(;++e<t.length;){const n=t[e][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(t.splice(e+1,n.type==="labelImage"?4:2),n.type="data",e++)}return t}function cr(t,e){let n=t.length,i=0,r,a,s,o;for(;n--;)if(r=t[n][1],a){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(s){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(a=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(s=n);const u={type:t[a][1].type==="labelLink"?"link":"image",start:Object.assign({},t[a][1].start),end:Object.assign({},t[t.length-1][1].end)},l={type:"label",start:Object.assign({},t[a][1].start),end:Object.assign({},t[s][1].end)},p={type:"labelText",start:Object.assign({},t[a+i+2][1].end),end:Object.assign({},t[s-2][1].start)};return o=[["enter",u,e],["enter",l,e]],o=Z(o,t.slice(a+1,a+i+3)),o=Z(o,[["enter",p,e]]),o=Z(o,re(e.parser.constructs.insideSpan.null,t.slice(a+i+4,s-3),e)),o=Z(o,[["exit",p,e],t[s-2],t[s-1],["exit",l,e]]),o=Z(o,t.slice(s+1)),o=Z(o,[["exit",u,e]]),st(t,a,t.length,o),t}function hr(t,e,n){const i=this;let r=i.events.length,a,s;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){a=i.events[r][1];break}return o;function o(m){return a?a._inactive?h(m):(s=i.parser.defined.includes(wt(i.sliceSerialize({start:a.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),u):n(m)}function u(m){return m===40?t.attempt(sr,p,s?p:h)(m):m===91?t.attempt(or,p,s?l:h)(m):s?p(m):h(m)}function l(m){return t.attempt(lr,p,h)(m)}function p(m){return e(m)}function h(m){return a._balanced=!0,n(m)}}function pr(t,e,n){return i;function i(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),r}function r(h){return G(h)?At(t,a)(h):a(h)}function a(h){return h===41?p(h):en(t,s,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function s(h){return G(h)?At(t,u)(h):p(h)}function o(h){return n(h)}function u(h){return h===34||h===39||h===40?rn(t,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):p(h)}function l(h){return G(h)?At(t,p)(h):p(h)}function p(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function fr(t,e,n){const i=this;return r;function r(o){return nn.call(i,t,a,s,"reference","referenceMarker","referenceString")(o)}function a(o){return i.parser.defined.includes(wt(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(o):n(o)}function s(o){return n(o)}}function dr(t,e,n){return i;function i(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),r}function r(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const mr={name:"labelStartImage",tokenize:gr,resolveAll:ae.resolveAll};function gr(t,e,n){const i=this;return r;function r(o){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(o),t.exit("labelImageMarker"),a}function a(o){return o===91?(t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelImage"),s):n(o)}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(o):e(o)}}const xr={name:"labelStartLink",tokenize:yr,resolveAll:ae.resolveAll};function yr(t,e,n){const i=this;return r;function r(s){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(s):e(s)}}const Ut={name:"lineEnding",tokenize:kr};function kr(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),D(t,e,"linePrefix")}}const _t={name:"thematicBreak",tokenize:br};function br(t,e,n){let i=0,r;return a;function a(l){return t.enter("thematicBreak"),s(l)}function s(l){return r=l,o(l)}function o(l){return l===r?(t.enter("thematicBreakSequence"),u(l)):i>=3&&(l===null||z(l))?(t.exit("thematicBreak"),e(l)):n(l)}function u(l){return l===r?(t.consume(l),i++,u):(t.exit("thematicBreakSequence"),N(l)?D(t,o,"whitespace")(l):o(l))}}const Q={name:"list",tokenize:Er,continuation:{tokenize:Ir},exit:Cr},wr={tokenize:Tr,partial:!0},Sr={tokenize:zr,partial:!0};function Er(t,e,n){const i=this,r=i.events[i.events.length-1];let a=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,s=0;return o;function o(c){const C=i.containerState.type||(c===42||c===43||c===45?"listUnordered":"listOrdered");if(C==="listUnordered"?!i.containerState.marker||c===i.containerState.marker:te(c)){if(i.containerState.type||(i.containerState.type=C,t.enter(C,{_container:!0})),C==="listUnordered")return t.enter("listItemPrefix"),c===42||c===45?t.check(_t,n,l)(c):l(c);if(!i.interrupt||c===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(c)}return n(c)}function u(c){return te(c)&&++s<10?(t.consume(c),u):(!i.interrupt||s<2)&&(i.containerState.marker?c===i.containerState.marker:c===41||c===46)?(t.exit("listItemValue"),l(c)):n(c)}function l(c){return t.enter("listItemMarker"),t.consume(c),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||c,t.check(Nt,i.interrupt?n:p,t.attempt(wr,m,h))}function p(c){return i.containerState.initialBlankLine=!0,a++,m(c)}function h(c){return N(c)?(t.enter("listItemPrefixWhitespace"),t.consume(c),t.exit("listItemPrefixWhitespace"),m):n(c)}function m(c){return i.containerState.size=a+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(c)}}function Ir(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Nt,r,a);function r(o){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,D(t,e,"listItemIndent",i.containerState.size+1)(o)}function a(o){return i.containerState.furtherBlankLines||!N(o)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(o)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(Sr,e,s)(o))}function s(o){return i.containerState._closeFlow=!0,i.interrupt=void 0,D(t,t.attempt(Q,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function zr(t,e,n){const i=this;return D(t,r,"listItemIndent",i.containerState.size+1);function r(a){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?e(a):n(a)}}function Cr(t){t.exit(this.containerState.type)}function Tr(t,e,n){const i=this;return D(t,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(a){const s=i.events[i.events.length-1];return!N(a)&&s&&s[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const Ne={name:"setextUnderline",tokenize:Pr,resolveTo:Ar};function Ar(t,e){let n=t.length,i,r,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const s={type:"setextHeading",start:Object.assign({},t[r][1].start),end:Object.assign({},t[t.length-1][1].end)};return t[r][1].type="setextHeadingText",a?(t.splice(r,0,["enter",s,e]),t.splice(a+1,0,["exit",t[i][1],e]),t[i][1].end=Object.assign({},t[a][1].end)):t[i][1]=s,t.push(["exit",s,e]),t}function Pr(t,e,n){const i=this;let r;return a;function a(l){let p=i.events.length,h;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){h=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||h)?(t.enter("setextHeadingLine"),r=l,s(l)):n(l)}function s(l){return t.enter("setextHeadingLineSequence"),o(l)}function o(l){return l===r?(t.consume(l),o):(t.exit("setextHeadingLineSequence"),N(l)?D(t,u,"lineSuffix")(l):u(l))}function u(l){return l===null||z(l)?(t.exit("setextHeadingLine"),e(l)):n(l)}}const Fr={tokenize:jr};function jr(t){const e=this,n=t.attempt(Nt,i,t.attempt(this.parser.constructs.flowInitial,r,D(t,t.attempt(this.parser.constructs.flow,r,t.attempt(Ri,r)),"linePrefix")));return n;function i(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Lr={resolveAll:sn()},_r=an("string"),Br=an("text");function an(t){return{tokenize:e,resolveAll:sn(t==="text"?Nr:void 0)};function e(n){const i=this,r=this.parser.constructs[t],a=n.attempt(r,s,o);return s;function s(p){return l(p)?a(p):o(p)}function o(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),u}function u(p){return l(p)?(n.exit("data"),a(p)):(n.consume(p),u)}function l(p){if(p===null)return!0;const h=r[p];let m=-1;if(h)for(;++m<h.length;){const c=h[m];if(!c.previous||c.previous.call(i,i.previous))return!0}return!1}}}function sn(t){return e;function e(n,i){let r=-1,a;for(;++r<=n.length;)a===void 0?n[r]&&n[r][1].type==="data"&&(a=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==a+2&&(n[a][1].end=n[r-1][1].end,n.splice(a+2,r-a-2),r=a+2),a=void 0);return t?t(n,i):n}}function Nr(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],r=e.sliceStream(i);let a=r.length,s=-1,o=0,u;for(;a--;){const l=r[a];if(typeof l=="string"){for(s=l.length;l.charCodeAt(s-1)===32;)o++,s--;if(s)break;s=-1}else if(l===-2)u=!0,o++;else if(l!==-1){a++;break}}if(o){const l={type:n===t.length||u||o<2?"lineSuffix":"hardBreakTrailing",start:{line:i.end.line,column:i.end.column-o,offset:i.end.offset-o,_index:i.start._index+a,_bufferIndex:a?s:i.start._bufferIndex+s},end:Object.assign({},i.end)};i.end=Object.assign({},l.start),i.start.offset===i.end.offset?Object.assign(i,l):(t.splice(n,0,["enter",l,e],["exit",l,e]),n+=2)}n++}return t}function Rr(t,e,n){let i=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const r={},a=[];let s=[],o=[];const u={consume:O,enter:b,exit:_,attempt:T(H),check:T(x),interrupt:T(x,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:t,sliceStream:c,sliceSerialize:m,now:C,defineSkip:P,write:h};let p=e.tokenize.call(l,u);return e.resolveAll&&a.push(e),l;function h(w){return s=Z(s,w),R(),s[s.length-1]!==null?[]:(j(e,0),l.events=re(a,l.events,l),l.events)}function m(w,E){return Or(c(w),E)}function c(w){return Mr(s,w)}function C(){const{line:w,column:E,offset:q,_index:V,_bufferIndex:B}=i;return{line:w,column:E,offset:q,_index:V,_bufferIndex:B}}function P(w){r[w.line]=w.column,I()}function R(){let w;for(;i._index<s.length;){const E=s[i._index];if(typeof E=="string")for(w=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===w&&i._bufferIndex<E.length;)y(E.charCodeAt(i._bufferIndex));else y(E)}}function y(w){p=p(w)}function O(w){z(w)?(i.line++,i.column=1,i.offset+=w===-3?2:1,I()):w!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),l.previous=w}function b(w,E){const q=E||{};return q.type=w,q.start=C(),l.events.push(["enter",q,l]),o.push(q),q}function _(w){const E=o.pop();return E.end=C(),l.events.push(["exit",E,l]),E}function H(w,E){j(w,E.from)}function x(w,E){E.restore()}function T(w,E){return q;function q(V,B,U){let $,J,ot,f;return Array.isArray(V)?lt(V):"tokenize"in V?lt([V]):K(V);function K(v){return St;function St(pt){const kt=pt!==null&&v[pt],gt=pt!==null&&v.null,Rt=[...Array.isArray(kt)?kt:kt?[kt]:[],...Array.isArray(gt)?gt:gt?[gt]:[]];return lt(Rt)(pt)}}function lt(v){return $=v,J=0,v.length===0?U:d(v[J])}function d(v){return St;function St(pt){return f=F(),ot=v,v.partial||(l.currentConstruct=v),v.name&&l.parser.constructs.disable.null.includes(v.name)?mt():v.tokenize.call(E?Object.assign(Object.create(l),E):l,u,tt,mt)(pt)}}function tt(v){return w(ot,f),B}function mt(v){return f.restore(),++J<$.length?d($[J]):U}}}function j(w,E){w.resolveAll&&!a.includes(w)&&a.push(w),w.resolve&&st(l.events,E,l.events.length-E,w.resolve(l.events.slice(E),l)),w.resolveTo&&(l.events=w.resolveTo(l.events,l))}function F(){const w=C(),E=l.previous,q=l.currentConstruct,V=l.events.length,B=Array.from(o);return{restore:U,from:V};function U(){i=w,l.previous=E,l.currentConstruct=q,l.events.length=V,o=B,I()}}function I(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function Mr(t,e){const n=e.start._index,i=e.start._bufferIndex,r=e.end._index,a=e.end._bufferIndex;let s;if(n===r)s=[t[n].slice(i,a)];else{if(s=t.slice(n,r),i>-1){const o=s[0];typeof o=="string"?s[0]=o.slice(i):s.shift()}a>0&&s.push(t[r].slice(0,a))}return s}function Or(t,e){let n=-1;const i=[];let r;for(;++n<t.length;){const a=t[n];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&r)continue;s=" ";break}default:s=String.fromCharCode(a)}r=a===-2,i.push(s)}return i.join("")}const Dr={42:Q,43:Q,45:Q,48:Q,49:Q,50:Q,51:Q,52:Q,53:Q,54:Q,55:Q,56:Q,57:Q,62:Ze},Hr={91:qi},qr={[-2]:vt,[-1]:vt,32:vt},Vr={35:Qi,42:_t,45:[Ne,_t],60:Zi,61:Ne,95:_t,96:_e,126:_e},$r={38:Ke,92:Je},vr={[-5]:Ut,[-4]:Ut,[-3]:Ut,33:mr,38:Ke,42:ee,60:[yi,rr],91:xr,92:[Ui,Je],93:ae,95:ee,96:ji},Ur={null:[ee,Lr]},Wr={null:[42,95]},Qr={null:[]},Gr=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Wr,contentInitial:Hr,disable:Qr,document:Dr,flow:Vr,flowInitial:qr,insideSpan:Ur,string:$r,text:vr},Symbol.toStringTag,{value:"Module"}));function Yr(t){const n=ii([Gr,...(t||{}).extensions||[]]),i={defined:[],lazy:{},constructs:n,content:r(hi),document:r(fi),flow:r(Fr),string:r(_r),text:r(Br)};return i;function r(a){return s;function s(o){return Rr(i,a,o)}}}function Xr(t){for(;!tn(t););return t}const Re=/[\0\t\n\r]/g;function Zr(){let t=1,e="",n=!0,i;return r;function r(a,s,o){const u=[];let l,p,h,m,c;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),h=0,e="",n&&(a.charCodeAt(0)===65279&&h++,n=void 0);h<a.length;){if(Re.lastIndex=h,l=Re.exec(a),m=l&&l.index!==void 0?l.index:a.length,c=a.charCodeAt(m),!l){e=a.slice(h);break}if(c===10&&h===m&&i)u.push(-3),i=void 0;else switch(i&&(u.push(-5),i=void 0),h<m&&(u.push(a.slice(h,m)),t+=m-h),c){case 0:{u.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,u.push(-2);t++<p;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:i=!0,t=1}h=m+1}return o&&(i&&u.push(-5),e&&u.push(e),u.push(null)),u}}const Jr=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Kr(t){return t.replace(Jr,ta)}function ta(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),a=r===120||r===88;return Xe(n.slice(a?2:1),a?16:10)}return ie(n)||t}const on={}.hasOwnProperty;function ea(t,e,n){return typeof e!="string"&&(n=e,e=void 0),na(n)(Xr(Yr(n).document().write(Zr()(t,e,!0))))}function na(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ue),autolinkProtocol:F,autolinkEmail:F,atxHeading:a(se),blockQuote:a(kt),characterEscape:F,characterReference:F,codeFenced:a(gt),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(gt,s),codeText:a(Rt,s),codeTextData:F,data:F,codeFlowValue:F,definition:a(cn),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(hn),hardBreakEscape:a(oe),hardBreakTrailing:a(oe),htmlFlow:a(le,s),htmlFlowData:F,htmlText:a(le,s),htmlTextData:F,image:a(pn),label:s,link:a(ue),listItem:a(fn),listItemValue:m,listOrdered:a(ce,h),listUnordered:a(ce),paragraph:a(dn),reference:d,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(se),strong:a(mn),thematicBreak:a(xn)},exit:{atxHeading:u(),atxHeadingSequence:H,autolink:u(),autolinkEmail:pt,autolinkProtocol:St,blockQuote:u(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:mt,characterReferenceMarkerNumeric:mt,characterReferenceValue:v,codeFenced:u(R),codeFencedFence:P,codeFencedFenceInfo:c,codeFencedFenceMeta:C,codeFlowValue:I,codeIndented:u(y),codeText:u(B),codeTextData:I,data:I,definition:u(),definitionDestinationString:_,definitionLabelString:O,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(E),hardBreakTrailing:u(E),htmlFlow:u(q),htmlFlowData:I,htmlText:u(V),htmlTextData:I,image:u($),label:ot,labelText:J,lineEnding:w,link:u(U),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:tt,resourceDestinationString:f,resourceTitleString:K,resource:lt,setextHeading:u(j),setextHeadingLineSequence:T,setextHeadingText:x,strong:u(),thematicBreak:u()}};ln(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(g){let k={type:"root",children:[]};const A={stack:[k],tokenStack:[],config:e,enter:o,exit:l,buffer:s,resume:p,data:n},L=[];let M=-1;for(;++M<g.length;)if(g[M][1].type==="listOrdered"||g[M][1].type==="listUnordered")if(g[M][0]==="enter")L.push(M);else{const et=L.pop();M=r(g,et,M)}for(M=-1;++M<g.length;){const et=e[g[M][0]];on.call(et,g[M][1].type)&&et[g[M][1].type].call(Object.assign({sliceSerialize:g[M][2].sliceSerialize},A),g[M][1])}if(A.tokenStack.length>0){const et=A.tokenStack[A.tokenStack.length-1];(et[1]||Me).call(A,void 0,et[0])}for(k.position={start:ft(g.length>0?g[0][1].start:{line:1,column:1,offset:0}),end:ft(g.length>0?g[g.length-2][1].end:{line:1,column:1,offset:0})},M=-1;++M<e.transforms.length;)k=e.transforms[M](k)||k;return k}function r(g,k,A){let L=k-1,M=-1,et=!1,xt,ut,Et,It;for(;++L<=A;){const X=g[L];switch(X[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{X[0]==="enter"?M++:M--,It=void 0;break}case"lineEndingBlank":{X[0]==="enter"&&(xt&&!It&&!M&&!Et&&(Et=L),It=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:It=void 0}if(!M&&X[0]==="enter"&&X[1].type==="listItemPrefix"||M===-1&&X[0]==="exit"&&(X[1].type==="listUnordered"||X[1].type==="listOrdered")){if(xt){let bt=L;for(ut=void 0;bt--;){const ct=g[bt];if(ct[1].type==="lineEnding"||ct[1].type==="lineEndingBlank"){if(ct[0]==="exit")continue;ut&&(g[ut][1].type="lineEndingBlank",et=!0),ct[1].type="lineEnding",ut=bt}else if(!(ct[1].type==="linePrefix"||ct[1].type==="blockQuotePrefix"||ct[1].type==="blockQuotePrefixWhitespace"||ct[1].type==="blockQuoteMarker"||ct[1].type==="listItemIndent"))break}Et&&(!ut||Et<ut)&&(xt._spread=!0),xt.end=Object.assign({},ut?g[ut][1].start:X[1].end),g.splice(ut||L,0,["exit",xt,X[2]]),L++,A++}if(X[1].type==="listItemPrefix"){const bt={type:"listItem",_spread:!1,start:Object.assign({},X[1].start),end:void 0};xt=bt,g.splice(L,0,["enter",bt,X[2]]),L++,A++,Et=void 0,It=!0}}}return g[k][1]._spread=et,A}function a(g,k){return A;function A(L){o.call(this,g(L),L),k&&k.call(this,L)}}function s(){this.stack.push({type:"fragment",children:[]})}function o(g,k,A){this.stack[this.stack.length-1].children.push(g),this.stack.push(g),this.tokenStack.push([k,A]),g.position={start:ft(k.start),end:void 0}}function u(g){return k;function k(A){g&&g.call(this,A),l.call(this,A)}}function l(g,k){const A=this.stack.pop(),L=this.tokenStack.pop();if(L)L[0].type!==g.type&&(k?k.call(this,g,L[0]):(L[1]||Me).call(this,g,L[0]));else throw new Error("Cannot close `"+g.type+"` ("+Tt({start:g.start,end:g.end})+"): itâs not open");A.position.end=ft(g.end)}function p(){return ei(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(g){if(this.data.expectingFirstListItemValue){const k=this.stack[this.stack.length-2];k.start=Number.parseInt(this.sliceSerialize(g),10),this.data.expectingFirstListItemValue=void 0}}function c(){const g=this.resume(),k=this.stack[this.stack.length-1];k.lang=g}function C(){const g=this.resume(),k=this.stack[this.stack.length-1];k.meta=g}function P(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function R(){const g=this.resume(),k=this.stack[this.stack.length-1];k.value=g.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const g=this.resume(),k=this.stack[this.stack.length-1];k.value=g.replace(/(\r?\n|\r)$/g,"")}function O(g){const k=this.resume(),A=this.stack[this.stack.length-1];A.label=k,A.identifier=wt(this.sliceSerialize(g)).toLowerCase()}function b(){const g=this.resume(),k=this.stack[this.stack.length-1];k.title=g}function _(){const g=this.resume(),k=this.stack[this.stack.length-1];k.url=g}function H(g){const k=this.stack[this.stack.length-1];if(!k.depth){const A=this.sliceSerialize(g).length;k.depth=A}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function T(g){const k=this.stack[this.stack.length-1];k.depth=this.sliceSerialize(g).codePointAt(0)===61?1:2}function j(){this.data.setextHeadingSlurpLineEnding=void 0}function F(g){const A=this.stack[this.stack.length-1].children;let L=A[A.length-1];(!L||L.type!=="text")&&(L=gn(),L.position={start:ft(g.start),end:void 0},A.push(L)),this.stack.push(L)}function I(g){const k=this.stack.pop();k.value+=this.sliceSerialize(g),k.position.end=ft(g.end)}function w(g){const k=this.stack[this.stack.length-1];if(this.data.atHardBreak){const A=k.children[k.children.length-1];A.position.end=ft(g.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(k.type)&&(F.call(this,g),I.call(this,g))}function E(){this.data.atHardBreak=!0}function q(){const g=this.resume(),k=this.stack[this.stack.length-1];k.value=g}function V(){const g=this.resume(),k=this.stack[this.stack.length-1];k.value=g}function B(){const g=this.resume(),k=this.stack[this.stack.length-1];k.value=g}function U(){const g=this.stack[this.stack.length-1];if(this.data.inReference){const k=this.data.referenceType||"shortcut";g.type+="Reference",g.referenceType=k,delete g.url,delete g.title}else delete g.identifier,delete g.label;this.data.referenceType=void 0}function $(){const g=this.stack[this.stack.length-1];if(this.data.inReference){const k=this.data.referenceType||"shortcut";g.type+="Reference",g.referenceType=k,delete g.url,delete g.title}else delete g.identifier,delete g.label;this.data.referenceType=void 0}function J(g){const k=this.sliceSerialize(g),A=this.stack[this.stack.length-2];A.label=Kr(k),A.identifier=wt(k).toLowerCase()}function ot(){const g=this.stack[this.stack.length-1],k=this.resume(),A=this.stack[this.stack.length-1];if(this.data.inReference=!0,A.type==="link"){const L=g.children;A.children=L}else A.alt=k}function f(){const g=this.resume(),k=this.stack[this.stack.length-1];k.url=g}function K(){const g=this.resume(),k=this.stack[this.stack.length-1];k.title=g}function lt(){this.data.inReference=void 0}function d(){this.data.referenceType="collapsed"}function tt(g){const k=this.resume(),A=this.stack[this.stack.length-1];A.label=k,A.identifier=wt(this.sliceSerialize(g)).toLowerCase(),this.data.referenceType="full"}function mt(g){this.data.characterReferenceType=g.type}function v(g){const k=this.sliceSerialize(g),A=this.data.characterReferenceType;let L;A?(L=Xe(k,A==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):L=ie(k);const M=this.stack.pop();M.value+=L,M.position.end=ft(g.end)}function St(g){I.call(this,g);const k=this.stack[this.stack.length-1];k.url=this.sliceSerialize(g)}function pt(g){I.call(this,g);const k=this.stack[this.stack.length-1];k.url="mailto:"+this.sliceSerialize(g)}function kt(){return{type:"blockquote",children:[]}}function gt(){return{type:"code",lang:null,meta:null,value:""}}function Rt(){return{type:"inlineCode",value:""}}function cn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function hn(){return{type:"emphasis",children:[]}}function se(){return{type:"heading",depth:0,children:[]}}function oe(){return{type:"break"}}function le(){return{type:"html",value:""}}function pn(){return{type:"image",title:null,url:"",alt:null}}function ue(){return{type:"link",title:null,url:"",children:[]}}function ce(g){return{type:"list",ordered:g.type==="listOrdered",start:null,spread:g._spread,children:[]}}function fn(g){return{type:"listItem",spread:g._spread,checked:null,children:[]}}function dn(){return{type:"paragraph",children:[]}}function mn(){return{type:"strong",children:[]}}function gn(){return{type:"text",value:""}}function xn(){return{type:"thematicBreak"}}}function ft(t){return{line:t.line,column:t.column,offset:t.offset}}function ln(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?ln(t,i):ia(t,i)}}function ia(t,e){let n;for(n in e)if(on.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function Me(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Tt({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Tt({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Tt({start:e.start,end:e.end})+") is still open")}function ra(t){const e=this;e.parser=n;function n(i){return ea(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}class Ct extends Error{position;name;constructor(e,n){super(e),this.name="GeneratorError",this.position=n}}const Oe=115,De=55;function aa(t){const n=Xn().use(ra).parse(t),i=[];let r=null;const a=n?.children||[];for(const s of a)if(s.type==="heading"){const o=s.depth;if(o<1||o>2)throw new Ct("Only (#) and (##) are allowed for node types",s.position);const u=s?.children[0];if(u?.type!=="text")throw new Ct("Node text must not contain any special formatting",s.position);const l=u.value,p=yt();o===1?i.push({id:p,type:"title",label:l}):o===2&&(r={id:p,type:"topic",label:l},i.push(r))}else if(s.type==="list"){const o=s.children;if(r){r.children=[];for(const u of o){const l=yt(),p=u.children[0];if(p?.type!=="paragraph")throw new Ct("Invalid content found in subtopic.",s.position);const h=p?.children[0];if(h?.type!=="text")throw new Ct("Invalid content found in subtopic",s.position);const m=h.value;r.children.push({id:l,type:"subtopic",label:m})}r=null}}else throw new Ct("Unknown node type found.",s.position);return i}function un(t,e){const n=document.createElement("div");n.style.position="absolute",n.style.visibility="hidden",n.style.whiteSpace="nowrap",n.style.fontSize=e==="title"?`${Pt.xxlarge.size}px`:`${Pt.medium.size}px`,n.style.fontFamily='"Balsamiq Sans", sans-serif',n.style.padding="12px 20px",n.style.border="2.7px solid #000",n.style.boxSizing="border-box",n.innerText=t,document.body.appendChild(n);const{width:i,height:r}=n.getBoundingClientRect();return document.body.removeChild(n),{width:i,height:r}}function He(t){const{source:e,target:n,sourceHandle:i,targetHandle:r}=t;return{id:yt(),source:e,target:n,style:{...ve.dashed},data:{edgeStyle:"dashed"},sourceHandle:i,targetHandle:r}}function qe(t,e,n,i=!1){const r=yt(),{label:a,type:s}=t,{width:o,height:u}=un(a,"topic");let l=e.x;n==="left"&&(l=e.x-o);const p={id:r,type:s,position:{x:l,y:e.y},selected:!1,data:{label:a},width:o,...i&&{height:u},style:{width:o,...i&&{height:u}},zIndex:999};return p.data={...p.data,style:{...p.data.style,fontSize:Pt.medium.size,justifyContent:"flex-start",textAlign:"center"}},p}const sa=41;function Ve(t){const e=aa(t),n=[],i=[];let r;const a={x:0,y:0};for(const s of e){const o=yt(),u=s.type,{width:l,height:p}=un(s.label,u),h={id:o,type:s.type,position:{x:a.x-l/2,y:a.y},selected:!1,data:{label:`${s.label}`},width:l,height:p,style:{width:l,height:p},zIndex:999};if(u==="title")h.data={...h.data,style:{...h.data.style,fontSize:Pt.xxlarge.size,justifyContent:"flex-start",textAlign:"center"}},a.y+=200;else if(u==="topic"){let m=p;if(h.data={...h.data,style:{...h.data.style,fontSize:Pt.medium.size,justifyContent:"flex-start",textAlign:"center"}},r&&i.push({id:yt(),source:r.id,target:o,targetHandle:"w1",sourceHandle:"x2",style:{...ve.solid},data:{edgeStyle:"solid"}}),s?.children?.length!==0){const c=s.children||[],C=c.slice(0,Math.ceil(c.length/2)),P=c.slice(Math.ceil(c.length/2)),R=Math.max(C.length,P.length);for(let y=0;y<R;y++){const O=C[y],b=P[y];if(O){const _=qe(O,{x:a.x-Oe-l/2,y:a.y+(De+2)*y},"left",!0);n.push(_),i.push(He({source:o,target:_.id,sourceHandle:"y2",targetHandle:"z1"})),m+=_?.height||sa}if(b){const _=qe(b,{x:a.x+Oe+l/2,y:a.y+(De+2)*y},"right",!0);n.push(_),i.push(He({source:o,target:_.id,sourceHandle:"z2",targetHandle:"y1"}))}}}a.y+=25+m}n.push(h),r=h}return{nodes:n,edges:i}}const W=2.7,Wt=5,$e=1e3;class oa{options;constructor(e={}){this.options={padding:20,fontFamily:"balsamiq",fontURL:"https://fonts.gstatic.com/s/balsamiqsans/v3/P5sEzZiAbNrN8SB3lQQX7Pncwd4XIA.woff2",...e}}async loadFont(){const{fontFamily:e,fontURL:n}=this.options,i=new FontFace(e,`url(${n})`);await i.load(),document.fonts&&document?.fonts?.add(i)}async render(e){await this.loadFont();const{x:n,y:i,measuredWidth:r,measuredHeight:a}=this.findDimensions(e),{nodes:s,edges:o}=e,u=this.makeSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:`${n} ${i} ${r} ${a}`,style:"font-family: balsamiq",version:"1.1"});return o?.forEach(l=>{this.renderEdge(l,s,u)}),s?.forEach(l=>{const p=o.find(m=>m.target===l.id)?.source||"",h={...l,parentId:p};this.renderNode(h,u)}),u}findDimensions(e){const{nodes:n}=e,{padding:i}=this.options;if(!n?.length)return{x:0,y:0,measuredWidth:0,measuredHeight:0};const r=n?.reduce((m,c)=>m.position.x<c.position.x?m:c),a=n?.reduce((m,c)=>m.position.y<c.position.y?m:c),s=n?.reduce((m,c)=>m.position.y>c.position.y?m:c),o=n?.reduce((m,c)=>m.position.x+(m?.width??0)>c.position.x+(c?.width??0)?m:c);let u=Math.round(o?.position?.x+(o?.width??0)-r?.position?.x)+i*2;const l=Math.round(s?.position?.y-a?.position?.y+(s?.height??0))+i*2;let p=Math.floor(r.position.x)-i;const h=Math.round(a.position.y)-i;if(u<1e3){const m=$e-u;u=$e,p-=m/2}return{x:p,y:h,measuredWidth:u,measuredHeight:l}}makeSvgElement(e,n={},i){const r=document.createElementNS("http://www.w3.org/2000/svg",e);for(const a in n)n?.hasOwnProperty(a)&&r.setAttribute(a,n[a]);return i&&i.appendChild(r),r}renderNode(e,n){const i=e.type;i in this?this[i](e,n):console.warn(`No renderer for node type: ${i}`)}renderEdge(e,n,i){const[r]=this.getEdgesPath(e,n),a=e?.markerStart?this.renderMarker(e.markerStart,i):"",s=e?.markerEnd?this.renderMarker(e.markerEnd,i):"";this.makeSvgElement("path",{d:r,fill:"none",stroke:e?.style?.stroke??"#000","stroke-width":3.5,"data-edge-id":e.id,"stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":e?.style?.strokeDasharray,...s&&{"marker-end":`url(#${s})`},...a&&{"marker-start":`url(#${a})`}},i)}getEdgesPath(e,n){const i=n.find(h=>h.id===e.source),r=n.find(h=>h.id===e.target),a=this.getSourcePosition(e,i),s=this.getTargetPosition(e,r);if(!a||!s)return[""];const o=e.sourceHandle.replace("1","2")||"x2",u=e.targetHandle.replace("2","1")||"x1",l=e.type,p={sourceX:a.x,sourceY:a.y,sourcePosition:this.getSourceEdgePosition(o),targetX:s.x,targetY:s.y,targetPosition:this.getTargetEdgePosition(u)};switch(l){case"default":return he(p);case"straight":return wn(p);case"step":return pe({...p,borderRadius:0});case"smoothstep":return pe(p);case"simplebezier":return bn(p);default:return he(p)}}renderMarker(e,n){let i=n?.querySelector("defs");i||(i=this.makeSvgElement("defs",{},n));const r=e.width??8,a=e.height??8,s=e.markerUnits??"strokeWidth",o=e.orient??"auto-start-reverse",u=i.querySelector(`marker[orient="${o}"][markerUnits="${s}"][markerWidth="${r}"][markerHeight="${a}"]`);if(u)return u.id;const l=`marker-${yt(6)}`,p=this.makeSvgElement("marker",{id:l,markerWidth:r,markerHeight:a,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:1.5,refY:0},i);return this.makeSvgElement("polyline",{stroke:e.color??"#000","stroke-width":e.strokeWidth??2,"stroke-linecap":"round","stroke-linejoin":"round",fill:e?.type==="arrowclosed"?e.color??"#000":"none",points:this.getMarkerPoints(e)},p),l}getMarkerPoints(e){if(e.type==="arrow")return"-5,-4 0,0 -5,4";if(e.type==="arrowclosed")return"-5,-4 0,0 -5,4 -5,-4"}getSourcePosition(e,n){const i=e.sourceHandle.replace("1","2")||"x2",r=this.getSourceEdgePosition(i);if(!n||!r)return null;switch(r){case"top":return{x:n.position.x+(n.width||0)/2,y:n.position.y};case"bottom":return{x:n.position.x+(n.width||0)/2,y:n.position.y+(n.height||0)};case"left":return{x:n.position.x,y:n.position.y+(n.height||0)/2};case"right":return{x:n.position.x+(n.width||0),y:n.position.y+(n.height||0)/2};default:return null}}getTargetPosition(e,n){const i=e.targetHandle.replace("2","1")||"x1",r=this.getTargetEdgePosition(i);if(!n||!r)return null;switch(r){case"top":return{x:n.position.x+(n.width||0)/2,y:n.position.y};case"bottom":return{x:n.position.x+(n.width||0)/2,y:n.position.y+(n.height||0)};case"left":return{x:n.position.x,y:n.position.y+(n.height||0)/2};case"right":return{x:n.position.x+(n.width||0),y:n.position.y+(n.height||0)/2};default:return null}}getSourceEdgePosition(e){switch(e){case"w2":return it.Top;case"x2":return it.Bottom;case"y2":return it.Left;case"z2":return it.Right;default:return it.Bottom}}getTargetEdgePosition(e){switch(e){case"w1":return it.Top;case"x1":return it.Bottom;case"y1":return it.Left;case"z1":return it.Right;default:return it.Top}}drawRectangle(e,n){let i="transparent";switch(e?.type){case"topic":i="#fdff00";break;case"subtopic":i="#ffe599";break;case"button":i=e?.data?.backgroundColor??"white";break;case"legend":i=e?.data?.backgroundColor??"white";break}this.makeSvgElement("rect",{x:e.position.x+W/2,y:e.position.y+W/2,width:(e.width||e?.style?.width||0)-W,height:(e.height||e?.style?.height||0)-W,rx:e?.data?.radius??Wt,fill:i,stroke:e?.data?.borderColor||e?.data?.backgroundColor||"black","stroke-width":W},n)}title(e,n){const i=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type,...e?.parentId&&{"data-parent-id":e?.parentId}},n),r=this.makeSvgElement("text",{x:e.position.x+(e?.width||e?.style?.width||0)/2,y:e.position.y+(e?.height||e?.style?.height||0)/2,"text-anchor":"middle","dominant-baseline":"middle","font-size":28,fill:"black"},i),a=this.makeSvgElement("tspan",{},r);a.textContent=e.data?.label??""}renderTopicSubTopic(e,n){const i=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type,...e?.parentId&&{"data-parent-id":e?.parentId}},n);this.drawRectangle(e,i);let r=e.position.x+(e?.width||e?.style?.width||0)/2;e?.data?.legend&&(r-=10,this.icon({x:e.position.x+(e?.width||0)-32,y:e.position.y+(e?.height||0)/2-10},e?.data?.legend?.color??"black",i));const a=this.makeSvgElement("text",{x:r,y:e.position.y+(e?.height||e?.style?.height||0)/2,"text-anchor":"middle","dominant-baseline":"middle","font-size":e?.data?.style?.fontSize??14,fill:"black"},i),s=this.makeSvgElement("tspan",{},a);s.textContent=e.data?.label??""}topic(e,n){return this.renderTopicSubTopic(e,n)}subtopic(e,n){this.renderTopicSubTopic(e,n)}section(e,n){const i=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type,...e?.parentId&&{"data-parent-id":e?.parentId}},n);this.makeSvgElement("rect",{x:e.position.x+W/2,y:e.position.y+W/2,width:(e.width||e?.style?.width||0)-W,height:(e.height||e?.style?.height||0)-W,rx:e?.data?.style?.borderRadius??Wt,fill:e?.data?.style?.backgroundColor??"transparent",stroke:e?.data?.style?.borderColor||e?.data?.style?.backgroundColor||"black","stroke-width":W},i);const r=this.makeSvgElement("text",{x:e.position.x,y:e.position.y-8,"text-anchor":"left","dominant-baseline":"auto","font-size":e?.data?.style?.fontSize??14,fill:"black"},i),a=this.makeSvgElement("tspan",{},r);a.textContent=e.data?.label??""}legend(e,n){const i=e.data?.legends??[],r=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type,...e?.parentId&&{"data-parent-id":e?.parentId}},n);this.drawRectangle(e,r);const a=e.position.x+25;let s=e.position.y+19;if(e?.data?.label){s+=4;const o=this.makeSvgElement("text",{x:a+1,y:s+8,"text-anchor":"left","dominant-baseline":"middle","font-size":16,fill:"black"},r),u=this.makeSvgElement("tspan",{},o);u.textContent=e.data?.label??""}i.forEach((o,u)=>{const l=a,p=e?.data?.label?s+32*(u+1):s+32*u,h=this.makeSvgElement("g",{"data-node-id":o.id,"data-type":"legend-item","data-parent-id":e.id},r);this.icon({x:l,y:p},o.color??"black",h);const m=this.makeSvgElement("text",{x:l+28,y:p+12,"text-anchor":"left","dominant-baseline":"middle","font-size":16,fill:"black"},h),c=this.makeSvgElement("tspan",{},m);c.textContent=o.label??""})}icon(e,n,i){const{x:r,y:a}=e,s=9.5;this.makeSvgElement("circle",{cx:r+s+1,cy:a+s,r:s,fill:n},i),this.makeSvgElement("path",{d:`M${r+6.5} ${a+s}L${r+9} ${a+s+3} ${r+14} ${a+s-2}`,fill:"none",stroke:"#fff","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},i)}linksgroup(e,n){const i=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type,...e?.parentId&&{"data-parent-id":e?.parentId}},n);this.drawRectangle(e,i);const r=e.data?.links??[],a=e.position.x+22;let s=e.position.y+22;if(e?.data?.label){s+=6;const o=this.makeSvgElement("text",{x:a+2,y:s+1,"text-anchor":"left","dominant-baseline":"middle","font-size":16,fill:"black"},i),u=this.makeSvgElement("tspan",{},o);u.textContent=e.data?.label??""}r.forEach((o,u)=>{const l=a,p=e?.data?.label?s+30*(u+1):s+30*u,h=this.makeSvgElement("g",{"data-node-id":o.id,"data-type":"link-item","data-parent-id":e.id,"data-link":o.url??""},i);this.icon({x:l,y:p},"#6b7280",h);const m=this.makeSvgElement("text",{x:l+28,y:p+10,"text-anchor":"left","dominant-baseline":"middle","font-size":16,fill:"black"},h),c=this.makeSvgElement("tspan",{},m);c.textContent=o.label??""})}vertical(e,n){const i=e?.data?.style??{},r=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type},n);this.makeSvgElement("line",{x1:e?.position?.x+10||0,y1:e?.position?.y+1||0,x2:e?.position?.x+10||0,y2:e?.position?.y+(e?.height||0)||0,style:`stroke-linecap: round; stroke-width: 3; stroke: ${i?.stroke||"black"}; stroke-dasharray: ${i?.strokeDasharray||0};`},r)}horizontal(e,n){const i=e?.data?.style??{},r=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type},n);this.makeSvgElement("line",{x1:e?.position?.x||0,y1:e?.position?.y||0,x2:e?.position?.x+(e?.width||0)||0,y2:e?.position?.y||0,style:`stroke-linecap: round; stroke-width: 3; stroke: ${i?.stroke||"black"}; stroke-dasharray: ${i?.strokeDasharray??0};`},r)}paragraph(e,n){const{style:i}=e?.data??{},r=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type},n);this.makeSvgElement("rect",{x:e.position.x+W/2,y:e.position.y+W/2,width:e.width||e?.style?.width||0,height:(e.height||e?.style?.height||0)-W,rx:Wt,fill:i?.backgroundColor??"transparent",stroke:i?.borderColor??"transparent","stroke-width":W},r);const a=this.splitTextIntoLines(e.data?.label??"",(e?.width||0)-18*2,i?.fontSize||14,this?.options.fontFamily||"balsamiq","normal"),s=20;let o=e.position.x+s,u=e.position.y+32-W/2,l=26;switch(i?.fontSize){case 24:u+=6,l=36;break;case 12:u-=5,l=19;break;case 20:u+=2,l=30;break;case 28:u+=10,l=42;break}let p="start",h="middle";const m=(i?.fontSize||14)*1;if(i?.textAlign==="center"?(o=e.position.x+(e.width||parseInt(e?.style?.width||"0")||0)/2,p="middle"):i?.textAlign==="right"&&(o=e.position.x+(e.width||parseInt(e?.style?.width||"0")||0)-s,p="end"),i?.justifyContent==="center")u=e.position.y+(e.height||parseInt(e?.style?.height||"0")||0)/2,h="middle",u=u-a.length*m/2;else if(i?.justifyContent==="flex-end"){switch(u=e.position.y+(e.height||parseInt(e?.style?.height||"0")||0)-24,i?.fontSize){case 12:break;case 20:u-=a.length*2;break;case 24:u-=a.length*5;break;case 28:u-=a.length*8;break}h="text-top",u=u-a.length*m}const c=this.makeSvgElement("text",{fill:i?.color??"black"},r);a.forEach((C,P)=>{const R=this.makeSvgElement("tspan",{x:o,y:u,dy:`${P===0?0:l*P}`,"text-anchor":p,"dominant-baseline":h,"font-size":i?.fontSize??15},c);R.textContent=C})}splitTextIntoLines(e,n,i,r,a){const s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),u=document.createElementNS(s,"text");u.setAttribute("font-size",i.toString()),u.setAttribute("font-family",r),u.setAttribute("font-weight",a),o.appendChild(u),document.body.appendChild(o);const l=[];let p="";for(const h of e.split(" ")){const m=p+(p?" ":"")+h;u.textContent=m,u.getComputedTextLength()<=n?p=m:(l.push(p),p=h)}return p&&l.push(p),document.body.removeChild(o),l}button(e,n){const i=this.makeSvgElement("g",{"data-link":e?.data?.href??"","data-node-id":e?.id??"","data-type":e?.type??"button"},n);this.drawRectangle(e,i);const r=this.makeSvgElement("text",{x:e.position.x+(e?.width||0)/2,y:e.position.y+(e?.height||0)/2,"text-anchor":"middle","dominant-baseline":"middle","font-size":e?.data?.style?.fontSize??14,fill:e?.data?.color??"black"},i),a=this.makeSvgElement("tspan",{},r);a.textContent=e.data?.label??""}}function la(t,e){return new oa(e).render(t)}const ua=10;async function ca(t,{onStream:e,onStreamEnd:n}){const i=new TextDecoder("utf-8");let r="";for(;;){const{value:a,done:s}=await t.read();if(s)break;if(a){let o=0;for(let u=0;u<a.length;u++)a[u]===ua&&(r+=i.decode(a.slice(o,u+1)),e?.(r),o=u+1);o<a.length&&(r+=i.decode(a.slice(o)))}}e?.(r),n?.(r),t.releaseLock()}function ha(t){const{roadmapTopic:e,setRoadmapTopic:n,handleSubmit:i,limit:r=0,limitUsed:a=0}=t,s=a<r;return S.jsxs("div",{className:"flex flex-grow flex-col items-center justify-center px-4 py-6 sm:px-6",children:[S.jsxs("div",{className:"flex flex-col gap-0 text-center sm:gap-2",children:[S.jsxs("h1",{className:"relative text-2xl font-medium sm:text-3xl",children:[S.jsx("span",{className:"hidden sm:inline",children:"Generate roadmaps with AI"}),S.jsx("span",{className:"inline sm:hidden",children:"AI Roadmap Generator"})]}),S.jsxs("p",{className:"text-base text-gray-500 sm:text-lg",children:[S.jsx("span",{className:"hidden sm:inline",children:"Enter a topic and let the AI generate a roadmap for you"}),S.jsx("span",{className:"inline sm:hidden",children:"Enter a topic to generate a roadmap"})]})]}),S.jsxs("form",{onSubmit:o=>{r>0&&s?i(o):o.preventDefault()},className:"my-3 flex w-full max-w-[600px] flex-col gap-2 sm:my-5 sm:flex-row",children:[S.jsx("input",{autoFocus:!0,type:"text",placeholder:"e.g. Ansible",className:"w-full rounded-md border border-gray-400 px-3 py-2.5 transition-colors focus:border-black focus:outline-none",value:e,onInput:o=>n(o.target.value)}),S.jsxs("button",{className:Bt("flex min-w-[143px] flex-shrink-0 items-center justify-center gap-2 rounded-md bg-black px-4 py-2 text-white",{"cursor-not-allowed opacity-50":!r||!e||a>=r}),children:[r>0&&s&&S.jsxs(S.Fragment,{children:[S.jsx(Qe,{size:20}),"Generate"]}),r===0&&S.jsx(S.Fragment,{children:S.jsx("span",{children:"Please wait.."})}),r>0&&!s&&S.jsxs("span",{className:"flex items-center text-base sm:text-sm",children:[S.jsx(We,{size:15,className:"mr-2"}),"Limit reached"]})]})]}),S.jsx("div",{className:"mb-36",children:S.jsxs("p",{className:"text-gray-500",children:[S.jsx("span",{className:"inline sm:hidden",children:"Generated "}),S.jsx("span",{className:"hidden sm:inline",children:"You have generated "}),S.jsxs("span",{className:Bt("inline-block w-[65px] rounded-md border px-0.5 text-center text-sm tabular-nums text-gray-800",{"animate-pulse border-zinc-300 bg-zinc-300 text-zinc-300":!r}),children:[a," of ",r]})," ","roadmaps.",!Gt&&S.jsxs(S.Fragment,{children:[" ",S.jsx("button",{className:"font-semibold text-black underline underline-offset-2",onClick:Yt,children:"Log in to increase your limit"})]})]})})]})}const Qt=new RegExp("@ROADMAPID:(\\w+)@");function $a(){const t=ht.useRef(null),{id:e}=Tn(),n=kn(),[i,r]=ht.useState(!1),[a,s]=ht.useState(!1),[o,u]=ht.useState(""),[l,p]=ht.useState(""),[h,m]=ht.useState(0),[c,C]=ht.useState(0),P=async T=>{const{nodes:j,edges:F}=Ve(T),I=await la({nodes:j,edges:F});t?.current&&Sn(t?.current,I)},R=async T=>{if(T.preventDefault(),!o)return;if(s(!0),r(!0),c>=h){n.error("You have reached your limit of generating roadmaps"),s(!1);return}An("id");const j=await fetch("https://api.roadmap.sh/v1-generate-ai-roadmap",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({topic:o})});if(!j.ok){const I=await j.json();n.error(I?.message||"Something went wrong"),s(!1),I.status===401&&(En(),window.location.reload())}const F=j.body?.getReader();if(!F){s(!1),n.error("Something went wrong");return}await ca(F,{onStream:async I=>{if(I.includes("@ROADMAPID")){const w=I.match(Qt)?.[1]||"";Pn({id:w}),I=I.replace(Qt,"")}await P(I)},onStreamEnd:async I=>{I=I.replace(Qt,""),p(I),b().finally(()=>{})}}),s(!1)},y=async()=>{if(!Gt()){Yt();return}zt.set("Redirecting to Editor");const{nodes:T,edges:j}=Ve(l),{response:F,error:I}=await Cn("https://api.roadmap.sh/v1-edit-ai-generated-roadmap",{title:o,nodes:T.map(w=>({...w,width:void 0,height:void 0,style:{...w.style,width:void 0,height:void 0}})),edges:j});if(I||!F){n.error(I?.message||"Something went wrong"),s(!1);return}window.location.href=`https://draw.roadmap.sh/${F.roadmapId}`},O=async()=>{zt.set("Downloading Roadmap");const T=document.getElementById("roadmap-container");if(!T){n.error("Something went wrong");return}try{await Fn(o,T),zt.set("")}catch(j){console.error(j),n.error("Something went wrong")}},b=async()=>{const{response:T,error:j}=await fe("https://api.roadmap.sh/v1-get-ai-roadmap-limit");if(j||!T){n.error(j?.message||"Something went wrong");return}const{limit:F,used:I}=T;m(F),C(I)},_=async T=>{zt.set("Loading Roadmap");const{response:j,error:F}=await fe(`https://api.roadmap.sh/v1-get-ai-roadmap/${T}`);if(F||!j){n.error(F?.message||"Something went wrong"),s(!1);return}const{topic:I,data:w}=j;await P(w),u(I),p(w)};if(ht.useEffect(()=>{b().finally(()=>{})},[]),ht.useEffect(()=>{e&&(r(!0),_(e).finally(()=>{zt.set("")}))},[e]),!i)return S.jsx(ha,{roadmapTopic:o,setRoadmapTopic:u,handleSubmit:R,limit:h,limitUsed:c});const H=`https://roadmap.sh/ai?id=${e}`,x=c<h;return S.jsxs("section",{className:"flex flex-grow flex-col bg-gray-100",children:[S.jsxs("div",{className:"flex items-center justify-center border-b bg-white py-3 sm:py-6",children:[a&&S.jsxs("span",{className:"flex items-center gap-2 rounded-full bg-black px-3 py-1 text-white",children:[S.jsx(In,{isDualRing:!1,innerFill:"white"}),"Generating roadmap .."]}),!a&&S.jsxs("div",{className:"flex max-w-[600px] flex-grow flex-col items-center px-5",children:[S.jsx("div",{className:"mt-2 flex w-full items-center justify-between text-sm",children:S.jsxs("span",{className:"text-gray-800",children:[S.jsxs("span",{className:Bt("inline-block w-[65px] rounded-md border px-0.5 text-center text-sm tabular-nums text-gray-800",{"animate-pulse border-zinc-300 bg-zinc-300 text-zinc-300":!h}),children:[c," of ",h]})," ","roadmaps generated",!Gt()&&S.jsxs(S.Fragment,{children:[" ",S.jsx("button",{className:"font-medium text-black underline underline-offset-2",onClick:Yt,children:"Login to increase your limit"})]})]})}),S.jsxs("form",{onSubmit:R,className:"my-3 flex w-full flex-col sm:flex-row sm:items-center sm:justify-center gap-2",children:[S.jsx("input",{type:"text",autoFocus:!0,placeholder:"e.g. Ansible",className:"flex-grow rounded-md border border-gray-400 px-3 py-2 transition-colors focus:border-black focus:outline-none",value:o,onInput:T=>u(T.target.value)}),S.jsxs("button",{type:"submit",className:Bt("flex min-w-[127px] flex-shrink-0 items-center gap-2 rounded-md bg-black px-4 py-2 text-white justify-center",{"cursor-not-allowed opacity-50":!h||!o||c>=h}),children:[h>0&&x&&S.jsxs(S.Fragment,{children:[S.jsx(Qe,{size:20}),"Generate"]}),h===0&&S.jsx("span",{children:"Please wait.."}),h>0&&!x&&S.jsxs("span",{className:"flex items-center text-sm",children:[S.jsx(We,{size:15,className:"mr-2"}),"Limit reached"]})]})]}),S.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[S.jsxs("div",{className:"flex items-center justify-between gap-2",children:[S.jsxs("button",{className:"inline-flex items-center justify-center gap-2 rounded-md bg-yellow-400 py-1.5 pl-2.5 pr-3 text-xs font-medium transition-opacity duration-300 hover:bg-yellow-500 sm:text-sm",onClick:O,children:[S.jsx(Ln,{size:15}),S.jsx("span",{className:"hidden sm:inline",children:"Download"})]}),e&&S.jsx(zn,{description:`Check out ${o} roadmap I generated on roadmap.sh`,pageUrl:H})]}),S.jsxs("button",{className:"inline-flex items-center justify-center gap-2 rounded-md bg-gray-200 py-1.5 pl-2.5 pr-3 text-xs font-medium text-black transition-colors duration-300 hover:bg-gray-300 sm:text-sm",onClick:y,disabled:a,children:[S.jsx(jn,{size:15}),"Edit in Editor"]})]})]})]}),S.jsx("div",{ref:t,id:"roadmap-container",className:"relative px-4 py-5 [&>svg]:mx-auto [&>svg]:max-w-[1300px]"})]})}export{$a as GenerateRoadmap};

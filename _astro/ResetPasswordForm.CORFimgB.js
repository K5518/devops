import{j as o}from"./jsx-runtime.BPj4-Rfu.js";import{r as t}from"./index.SSXOyoI7.js";import{h as w}from"./http.8USyDMBE.js";import{s as h}from"./jwt.CPeqYXpJ.js";function k(){const[c,f]=t.useState(""),[a,m]=t.useState(""),[n,p]=t.useState(""),[l,r]=t.useState(!1),[u,i]=t.useState("");t.useEffect(()=>{const s=new URLSearchParams(window.location.search).get("code");s?f(s):window.location.href="/login"},[]);const g=async e=>{if(e.preventDefault(),r(!0),a!==n){r(!1),i("Passwords do not match.");return}const{response:s,error:d}=await w("https://api.roadmap.sh/v1-reset-forgotten-password",{newPassword:a,confirmPassword:n,code:c});if(d?.message){r(!1),i(d.message);return}if(!s?.token){r(!1),i("Something went wrong. Please try again later.");return}s.token,h(s.token),window.location.href="/"};return o.jsxs("form",{className:"mx-auto w-full",onSubmit:g,children:[o.jsx("input",{type:"password",className:"mb-2 mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none transition duration-150 ease-in-out placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,minLength:6,placeholder:"New Password",value:a,onInput:e=>m(e.target.value)}),o.jsx("input",{type:"password",className:"mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none transition duration-150 ease-in-out placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,minLength:6,placeholder:"Confirm New Password",value:n,onInput:e=>p(e.target.value)}),u&&o.jsx("p",{className:"mt-2 rounded-lg bg-red-100 p-2 text-red-700",children:u}),o.jsx("button",{type:"submit",disabled:l,className:"mt-2 inline-flex w-full items-center justify-center rounded-lg bg-black p-2 py-3 text-sm font-medium text-white outline-none focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:bg-gray-400",children:l?"Please wait...":"Reset Password"})]})}export{k as ResetPasswordForm};

import{j as e}from"./jsx-runtime.BPj4-Rfu.js";import{r as m}from"./index.SSXOyoI7.js";import{u as f}from"./use-copy-text.i66JXdki.js";import{u as y}from"./use-auth.jaZcEPdF.js";import{a as w}from"./http.BuCmuCAv.js";import{p as v}from"./page.C3ddTGlS.js";import{d as N}from"./download-image.DugWrjuw.js";import{C as h}from"./copy.ox-RWvwE.js";import"./jwt.CPeqYXpJ.js";import"./index.CEvxOxeV.js";import"./createLucideIcon.BSeNqbob.js";function x(a){const{text:s,isDisabled:o,isSelected:i,onClick:l}=a;return e.jsx("button",{className:`rounded-md border p-1 px-2 text-sm ${i?" border-gray-500 bg-gray-300 ":""} ${o?" cursor-not-allowed opacity-40 ":" cursor-pointer "}`,onClick:l,children:s})}function k(a){const{selectedRoadmaps:s,setSelectedRoadmaps:o}=a,[i,l]=m.useState(),n=async()=>{const{response:r,error:t}=await w("https://api.roadmap.sh/v1-get-user-all-progress");t||!r||l(r)};m.useEffect(()=>{n().finally(()=>{v.set("")})},[]);const d=s.length<4,c=i?.filter(r=>r.resourceType==="roadmap")||[];return e.jsxs("div",{className:"flex flex-wrap gap-1",children:[c?.length===0&&e.jsx("p",{className:"text-sm italic text-gray-400",children:"No progress tracked so far."}),c?.map(r=>{const t=s.includes(r.resourceId),b=t||d;return e.jsx(x,{text:r.resourceTitle,isDisabled:!b,isSelected:t,onClick:()=>{t?o(s.filter(j=>j!==r.resourceId)):s.length<4&&o([...s,r.resourceId])}},r.resourceId)})]})}function S(){return e.jsxs("p",{className:"mt-3 rounded-md border p-2 text-sm w-full bg-yellow-100 border-yellow-400 text-yellow-900",children:["Add this badge to your"," ",e.jsx("a",{href:"https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-profile/customizing-your-profile/managing-your-profile-readme",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:"GitHub profile readme."})]})}function p(a){const{step:s}=a;return e.jsx("span",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-gray-300 text-white",children:s})}function g(a){const{text:s,title:o}=a,{isCopied:i,copyText:l}=f();return e.jsxs("div",{className:"flex w-full flex-grow flex-col overflow-hidden rounded border border-gray-300 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-gray-300 px-3 py-2",children:[e.jsx("span",{className:"text-xs uppercase leading-none text-gray-400",children:o}),e.jsxs("button",{className:"flex items-center",onClick:()=>l(s),children:[i&&e.jsx("span",{className:"mr-1 text-xs leading-none text-gray-700",children:"Copied!Â "}),e.jsx(h,{className:"inline-block h-4 w-4"})]})]}),e.jsx("textarea",{className:"no-scrollbar block h-12 w-full overflow-x-auto whitespace-nowrap bg-gray-200/70 p-3 text-sm text-gray-900 focus:bg-gray-50 focus:outline-0",readOnly:!0,onClick:n=>{n.target.select(),l(n.target.value)},value:s})]})}function u(a){const{label:s}=a;return e.jsx("span",{className:"mb-3 flex items-center gap-2 text-sm leading-none text-gray-400",children:s})}function H(){const{isCopied:a,copyText:s}=f(),[o,i]=m.useState([]),[l,n]=m.useState("tall"),[d,c]=m.useState("dark"),r=y();if(!r)return null;const t=new URL(`https://api.roadmap.sh/v1-badge/${l}/${r?.id}`);return t.searchParams.set("variant",d),o.length>0&&t.searchParams.set("roadmaps",o.join(",")),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mx-0 flex items-start gap-4 border-b px-0 pb-4 pt-2 sm:-mx-10 sm:px-10",children:[e.jsx(p,{step:1}),e.jsxs("div",{children:[e.jsx(u,{label:"Pick progress to show (Max. 4)"}),e.jsx("div",{className:"flex flex-wrap",children:e.jsx(k,{selectedRoadmaps:o,setSelectedRoadmaps:i})})]})]}),e.jsxs("div",{className:"mx-0 flex items-start gap-4 border-b px-0 py-4 sm:-mx-10 sm:px-10",children:[e.jsx(p,{step:2}),e.jsxs("div",{children:[e.jsx(u,{label:"Select Mode (Dark vs Light)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{text:"Dark",isDisabled:!1,isSelected:d==="dark",onClick:()=>{c("dark")}}),e.jsx(x,{text:"Light",isDisabled:!1,isSelected:d==="light",onClick:()=>{c("light")}})]})]})]}),e.jsxs("div",{className:"mx-0 flex items-start gap-4 border-b px-0 py-4 sm:-mx-10 sm:px-10",children:[e.jsx(p,{step:3}),e.jsxs("div",{children:[e.jsx(u,{label:"Select Version"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{text:"Tall",isDisabled:!1,isSelected:l==="tall",onClick:()=>{n("tall")}}),e.jsx(x,{text:"Wide",isDisabled:!1,isSelected:l==="wide",onClick:()=>{n("wide")}})]})]})]}),e.jsxs("div",{className:"mx-0 flex items-start gap-4 border-b px-0 py-4 sm:-mx-10 sm:px-10",children:[e.jsx(p,{step:4}),e.jsxs("div",{className:"flex-grow",children:[e.jsx(u,{label:"Share your #RoadCard with others"}),e.jsx("div",{className:"rounded-md border bg-gray-50 p-2 text-center",children:e.jsx("a",{href:t.toString(),target:"_blank",rel:"noopener noreferrer",className:`relative block hover:cursor-pointer ${l==="tall"?" max-w-[270px] ":" w-full "}`,children:e.jsx("img",{src:t.toString(),alt:"RoadCard"})})}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[e.jsx("button",{className:"flex items-center justify-center rounded border border-gray-300 p-1.5 px-2 text-sm font-medium",onClick:()=>N({url:t.toString(),name:"road-card",scale:4}),children:"Download"}),e.jsxs("button",{disabled:a,className:"flex cursor-pointer items-center justify-center rounded border border-gray-300 p-1.5 px-2 text-sm font-medium disabled:bg-blue-50",onClick:()=>s(t.toString()),children:[e.jsx(h,{size:16,className:"inline-block h-4 w-4 mr-1"}),a?"Copied!":"Copy Link"]})]}),e.jsxs("div",{className:"mt-3 flex flex-col gap-3",children:[e.jsx(g,{title:"HTML",text:`<a href="https://roadmap.sh"><img src="${t}" alt="roadmap.sh"/></a>`.trim()}),e.jsx(g,{title:"Markdown",text:`[![roadmap.sh](${t})](https://roadmap.sh)`.trim()})]}),e.jsx(S,{})]})]})]})}export{H as RoadCardPage};

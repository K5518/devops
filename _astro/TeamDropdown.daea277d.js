import{_ as y,h as f,p as h}from"./hooks.module.7cc4e70a.js";import{D as T}from"./dropdown.d1f25819.js";import{a as $}from"./http.82ebf0f1.js";import{u as I}from"./use-auth.13ac07ad.js";import{u as L}from"./use-outside-click.85d1a62f.js";import{S as D}from"./Spinner.95905af5.js";import{b as g,c as w}from"./team.12f2469e.js";import{u as x}from"./index.c54070cf.js";import{u as _}from"./use-team-id.3d0ab368.js";import{u as j}from"./use-toast.fb52de5d.js";import{o as e}from"./jsxRuntime.module.afbf92fe.js";import"./preact.module.7b19fc78.js";import"./jwt.f0e0aa9c.js";import"./index.a98c85f5.js";import"./toast.1fe7142d.js";function J(){const s=I(),{teamId:i}=_(),a=x(w),n=x(g),v=j(),m=y(null),[o,c]=f(!0),[d,u]=f(!1),p=n?n.avatar:s?.avatar,b=n?n.name:s?.name;L(m,()=>{u(!1)});async function N(){const{response:t,error:r}=await $("https://api.roadmap.sh/v1-get-user-teams");if(r||!t){v.error(r?.message||"Something went wrong");return}w.set(t)}h(()=>{!i||!a||g.set(a.find(t=>t._id===i))},[a,i]),h(()=>{c(!0),N().finally(()=>{c(!1)})},[]);const l=a.filter(t=>t.status==="invited").map(t=>t._id);return!s?.email.endsWith("@insightpartners.com")&&!s?.email.endsWith("@roadmap.sh")&&!["arikchangma@gmail.com","kamranahmed.se@gmail.com","stephen.chetcuti@gmail.com"].includes(s?.email)?null:e("div",{className:"relative mr-2",children:[e("button",{className:"flex w-full cursor-pointer items-center justify-between rounded border p-2 text-sm hover:bg-gray-100",onClick:()=>u(!d),children:[l.length>0&&e("span",{className:"absolute -left-1.5 -top-1.5 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs font-medium text-white",children:l.length}),e("div",{className:"inline-grid grid-cols-[16px_auto] items-center gap-1.5 mr-1.5",children:[o&&e(D,{className:"h-4 w-4",isDualRing:!1}),!o&&e("img",{src:p?`https://dodrc8eu8m09s.cloudfront.net/avatars/${p}`:"/images/default-avatar.png",alt:"",className:"h-4 w-4 rounded-full object-cover"}),e("span",{className:"truncate",children:[!o&&b,o&&"Loading .."]})]}),e("img",{alt:"show dropdown",src:T,className:"h-4 w-4"})]}),d&&e("div",{ref:m,className:"absolute top-full z-50 mt-2 w-full rounded-md bg-slate-800 px-2 py-2 text-white shadow-md",children:[e("ul",{children:[e("li",{children:e("a",{className:"flex w-full cursor-pointer items-center gap-2 truncate rounded p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",href:"/account",children:e("span",{className:"truncate",children:"Personal Account"})})}),a.map(t=>{let r="";return t.status==="invited"?r=`/respond-invite?i=${t.memberId}`:t.status==="joined"&&(r=`/team/progress?t=${t._id}`),e("li",{children:e("a",{className:"flex w-full cursor-pointer items-center gap-2 rounded p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",href:`${r}`,children:[e("span",{className:"flex-grow min-w-0 truncate",children:t.name}),l.includes(t._id)&&e("span",{className:"flex rounded-md bg-red-500 px-2 text-xs text-white",children:"Invite"})]})})})]}),e("a",{className:"mt-2 flex w-full cursor-pointer items-center justify-center gap-2 rounded bg-gray-100 p-2 text-sm font-medium text-slate-800 hover:opacity-90",href:"/team/new",children:[e("span",{children:"+"}),e("span",{children:"New Team"})]})]}),e("hr",{class:"my-4"})]})}export{J as TeamDropdown};

<h1 id="write-through">Write-through</h1>
<p>The application uses the cache as the main data store, reading and writing data to it, while the cache is responsible for reading and writing to the database:</p>
<ul>
<li>Application adds/updates entry in cache</li>
<li>Cache synchronously writes entry to data store</li>
<li>Return</li>
</ul>
<p>Application code:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" lang="python"><code><span class="line"><span style="color:#F8F8F2">set_user(</span><span style="color:#BD93F9">12345</span><span style="color:#F8F8F2">, {</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">foo</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">:</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">bar</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">})</span></span></code></pre>
<p>Cache code:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" lang="python"><code><span class="line"><span style="color:#FF79C6">def</span><span style="color:#50FA7B"> set_user</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">user_id</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">values</span><span style="color:#F8F8F2">):</span></span>
<span class="line"><span style="color:#F8F8F2">  user </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> db.query(</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">UPDATE Users WHERE id = </span><span style="color:#BD93F9">{0}</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">, user_id, values)</span></span>
<span class="line"><span style="color:#F8F8F2">  cache.set(user_id, user)</span></span></code></pre>
<p>Write-through is a slow overall operation due to the write operation, but subsequent reads of just written data are fast. Users are generally more tolerant of latency when updating data than reading data. Data in the cache is not stale.</p>
<h2 id="disadvantages">Disadvantages</h2>
<ul>
<li>When a new node is created due to failure or scaling, the new node will not cache entries until the entry is updated in the database. Cache-aside in conjunction with write through can mitigate this issue.</li>
<li>Most data written might never be read, which can be minimized with a TTL.</li>
</ul>
<p><img src="https://i.imgur.com/Ujf0awN.png" alt="Write through"></p>
<p>Have a look at the following resources to learn more:</p>
<ul>
<li><a href="http://www.slideshare.net/jboner/scalability-availability-stability-patterns/" rel="noopener noreferrer nofollow" target="_blank">Scalability, availability, stability, patterns</a></li>
</ul>
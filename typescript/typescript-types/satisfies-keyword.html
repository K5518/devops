<h1 id="satisfies-keyword">satisfies Keyword</h1>
<p>TypeScript developers are often faced with a dilemma: we want to ensure that some expression matches some type, but also want to keep the most specific type of that expression for inference purposes.</p>
<p>For example:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6272A4">// Each property can be a string or an RGB tuple.</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> palette </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  red</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span><span style="color:#BD93F9">255</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">],</span></span>
<span class="line"><span style="color:#F8F8F2">  green</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">#00ff00</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  bleu</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">255</span><span style="color:#F8F8F2">],</span></span>
<span class="line"><span style="color:#6272A4">  //  ^^^^ sacrebleu - we've made a typo!</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// We want to be able to use array methods on 'red'...</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> redComponent </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> palette.red.</span><span style="color:#50FA7B">at</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// or string methods on 'green'...</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> greenNormalized </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> palette.green.</span><span style="color:#50FA7B">toUpperCase</span><span style="color:#F8F8F2">();</span></span></code></pre>
<p>Notice that we’ve written <code>bleu</code>, whereas we probably should have written <code>blue</code>. We could try to catch that <code>bleu</code> typo by using a type annotation on palette, but we’d lose the information about each property.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">type</span><span style="color:#8BE9FD;font-style:italic"> Colors</span><span style="color:#FF79C6"> =</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">red</span><span style="color:#E9F284">'</span><span style="color:#FF79C6"> |</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">green</span><span style="color:#E9F284">'</span><span style="color:#FF79C6"> |</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">blue</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">type</span><span style="color:#8BE9FD;font-style:italic"> RGB</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> [red: </span><span style="color:#8BE9FD;font-style:italic">number</span><span style="color:#F8F8F2">, green: </span><span style="color:#8BE9FD;font-style:italic">number</span><span style="color:#F8F8F2">, blue: </span><span style="color:#8BE9FD;font-style:italic">number</span><span style="color:#F8F8F2">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> palette</span><span style="color:#FF79C6">:</span><span style="color:#8BE9FD;font-style:italic"> Record</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FFB86C;font-style:italic">Colors</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">string</span><span style="color:#FF79C6"> |</span><span style="color:#FFB86C;font-style:italic"> RGB</span><span style="color:#F8F8F2">> </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  red</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span><span style="color:#BD93F9">255</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">],</span></span>
<span class="line"><span style="color:#F8F8F2">  green</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">#00ff00</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  bleu</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">255</span><span style="color:#F8F8F2">],</span></span>
<span class="line"><span style="color:#6272A4">  //  ~~~~ The typo is now correctly detected</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"><span style="color:#6272A4">// But we now have an undesirable error here - 'palette.red' "could" be a string.</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> redComponent </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> palette.red.</span><span style="color:#50FA7B">at</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">);</span></span></code></pre>
<p>The <code>satisfies</code> operator lets us validate that the type of an expression matches some type, without changing the resulting type of that expression. As an example, we could use <code>satisfies</code> to validate that all the properties of palette are compatible with <code>string | number[]</code>:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">type</span><span style="color:#8BE9FD;font-style:italic"> Colors</span><span style="color:#FF79C6"> =</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">red</span><span style="color:#E9F284">'</span><span style="color:#FF79C6"> |</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">green</span><span style="color:#E9F284">'</span><span style="color:#FF79C6"> |</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">blue</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">type</span><span style="color:#8BE9FD;font-style:italic"> RGB</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> [red: </span><span style="color:#8BE9FD;font-style:italic">number</span><span style="color:#F8F8F2">, green: </span><span style="color:#8BE9FD;font-style:italic">number</span><span style="color:#F8F8F2">, blue: </span><span style="color:#8BE9FD;font-style:italic">number</span><span style="color:#F8F8F2">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> palette </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">  red</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span><span style="color:#BD93F9">255</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">],</span></span>
<span class="line"><span style="color:#F8F8F2">  green</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">#00ff00</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  bleu</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">255</span><span style="color:#F8F8F2">],</span></span>
<span class="line"><span style="color:#6272A4">  //  ~~~~ The typo is now caught!</span></span>
<span class="line"><span style="color:#F8F8F2">} </span><span style="color:#FF79C6">satisfies</span><span style="color:#8BE9FD;font-style:italic"> Record</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FFB86C;font-style:italic">Colors</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">string</span><span style="color:#FF79C6"> |</span><span style="color:#FFB86C;font-style:italic"> RGB</span><span style="color:#F8F8F2">>;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Both of these methods are still accessible!</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> redComponent </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> palette.red.</span><span style="color:#50FA7B">at</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">0</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> greenNormalized </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> palette.green.</span><span style="color:#50FA7B">toUpperCase</span><span style="color:#F8F8F2">();</span></span></code></pre>
<p>Learn more from the following resources:</p>
<ul>
<li><a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-9.html#the-satisfies-operator" rel="noopener noreferrer nofollow" target="_blank">Satisfies Keyword</a></li>
</ul>
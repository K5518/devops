<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/cpp/content/112-idioms/101-pimpl.md"></div> <h1 id="pimpl-idiom">Pimpl Idiom</h1>
<p>Pimpl (Pointer-to-Implementation) idiom, also known as a private class data, compiler firewall, or handle classes, is a technique used in C++ to hide the implementation details of a class by using a forward declaration to a private structure or class, keeping the public interface of the class clean, and reducing compile-time dependencies.</p>
<h2 id="implementation">Implementation</h2>
<p>Here is a simple example illustrating the Pimpl idiom:</p>
<p><strong>my_class.h</strong></p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> MyClass_Impl</span><span style="color:#F8F8F2">;</span><span style="color:#6272A4"> // forward declaration</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> MyClass</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#FF79C6">public:</span></span>
<span class="line"><span style="color:#50FA7B">    MyClass</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#50FA7B">    ~MyClass</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#FF79C6">    void</span><span style="color:#50FA7B"> some_method</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">private:</span></span>
<span class="line"><span style="color:#F8F8F2">    MyClass_Impl </span><span style="color:#FF79C6">*</span><span style="color:#F8F8F2">pimpl;</span><span style="color:#6272A4"> // pointer to the implementation</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span></code></pre>
<p><strong>my_class.cpp</strong></p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">#include</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">my_class.h</span><span style="color:#E9F284">"</span></span>
<span class="line"><span style="color:#FF79C6">#include</span><span style="color:#E9F284"> &#x3C;</span><span style="color:#F1FA8C">iostream</span><span style="color:#E9F284">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> MyClass_Impl</span><span style="color:#6272A4"> // the actual implementation</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#FF79C6">public:</span></span>
<span class="line"><span style="color:#FF79C6">    void</span><span style="color:#50FA7B"> some_method</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">    {</span></span>
<span class="line"><span style="color:#F8F8F2">        std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">cout </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">Implementation method called!</span><span style="color:#E9F284">"</span><span style="color:#FF79C6"> &#x3C;&#x3C;</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">endl;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">MyClass</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">MyClass</span><span style="color:#F8F8F2">() : </span><span style="color:#50FA7B">pimpl</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6;font-weight:bold">new</span><span style="color:#50FA7B"> MyClass_Impl</span><span style="color:#F8F8F2">()) {}</span><span style="color:#6272A4"> // constructor</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">MyClass</span><span style="color:#FF79C6">::~</span><span style="color:#50FA7B">MyClass</span><span style="color:#F8F8F2">() { </span><span style="color:#FF79C6">delete</span><span style="color:#F8F8F2"> pimpl; }</span><span style="color:#6272A4"> // destructor</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">void</span><span style="color:#F8F8F2"> MyClass</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">some_method</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#F8F8F2">    pimpl</span><span style="color:#FF79C6">-></span><span style="color:#50FA7B">some_method</span><span style="color:#F8F8F2">();</span><span style="color:#6272A4"> // delegation to the implementation</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre>
<p>Now, all the public methods of <code>MyClass</code> will delegate the calls to the corresponding methods of <code>MyClass_Impl</code>. By doing this, you can hide the details of class implementation, reduce the compile-time dependencies, and ease the maintenance of your code.</p>
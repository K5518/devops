<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/cpp/content/libraries/104-grpc.md"></div> <h1 id="grpc">gRPC</h1>
<p>gRPC (gRPC Remote Procedure Calls) is an open-source Remote Procedure Call (RPC) framework that runs on various programming languages, including C++. gRPC is designed to be high-performance, efficient, and scalable, making it ideal for microservice architectures and other applications with high performance requirements.</p>
<p>gRPC uses the Protocol Buffers (Protobuf) serialization format for message exchange and method definition. Protocol Buffers enable more efficient and smaller serialization compared to other formats like JSON or XML.</p>
<h2 id="protocol-buffers">Protocol Buffers</h2>
<p>In gRPC, you start by defining service definitions and message structures in <code>.proto</code> files. You can define data structures and service interfaces using a compact, language-neutral, platform-neutral binary format.</p>
<p>Here’s an example of how that might look:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">syntax</span><span style="color:#FF79C6"> =</span><span style="color:#F1FA8C"> "proto3"</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">package</span><span style="color:#F1FA8C"> example</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// The gRPC service definition</span></span>
<span class="line"><span style="color:#FF79C6">service</span><span style="color:#8BE9FD"> Greeter</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  rpc</span><span style="color:#50FA7B"> SayHello</span><span style="color:#F8F8F2"> (</span><span style="color:#8BE9FD">HelloRequest</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">returns</span><span style="color:#F8F8F2"> (</span><span style="color:#8BE9FD">HelloReply</span><span style="color:#F8F8F2">) {}</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// The Request message definition</span></span>
<span class="line"><span style="color:#FF79C6">message</span><span style="color:#8BE9FD"> HelloRequest</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  string</span><span style="color:#F8F8F2"> name </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// The Reply message definition</span></span>
<span class="line"><span style="color:#FF79C6">message</span><span style="color:#8BE9FD"> HelloReply</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">  string</span><span style="color:#F8F8F2"> message </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre>
<p>After defining the <code>.proto</code> file, you use the <code>protoc</code> compiler to generate the corresponding C++ code for your application.</p>
<h2 id="grpc-c-server">gRPC C++ Server</h2>
<p>To create a gRPC server in C++, you first need to implement the service interface generated by the <code>protoc</code> compiler. Here’s an example implementation for the <code>Greeter</code> service:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">#include</span><span style="color:#E9F284"> &#x3C;</span><span style="color:#F1FA8C">grpcpp/grpcpp.h</span><span style="color:#E9F284">></span></span>
<span class="line"><span style="color:#FF79C6">#include</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">example.grpc.pb.h</span><span style="color:#E9F284">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> grpc</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">Server;</span></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> grpc</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">ServerBuilder;</span></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> grpc</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">ServerContext;</span></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> grpc</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">Status;</span></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> example</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">HelloRequest;</span></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> example</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">HelloReply;</span></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> example</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">Greeter;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> GreeterServiceImpl</span><span style="color:#FF79C6"> final</span><span style="color:#F8F8F2"> : </span><span style="color:#FF79C6">public</span><span style="color:#F8F8F2"> Greeter</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">Service</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#8BE9FD;font-style:italic">  Status</span><span style="color:#50FA7B"> SayHello</span><span style="color:#F8F8F2">(</span><span style="color:#8BE9FD;font-style:italic">ServerContext</span><span style="color:#FF79C6">*</span><span style="color:#FFB86C;font-style:italic"> context</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">const</span><span style="color:#8BE9FD;font-style:italic"> HelloRequest</span><span style="color:#FF79C6">*</span><span style="color:#FFB86C;font-style:italic"> request</span><span style="color:#F8F8F2">, </span><span style="color:#8BE9FD;font-style:italic">HelloReply</span><span style="color:#FF79C6">*</span><span style="color:#FFB86C;font-style:italic"> reply</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">override</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">string </span><span style="color:#50FA7B">prefix</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">Hello </span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">    reply</span><span style="color:#FF79C6">-></span><span style="color:#50FA7B">set_message</span><span style="color:#F8F8F2">(prefix </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> request</span><span style="color:#FF79C6">-></span><span style="color:#50FA7B">name</span><span style="color:#F8F8F2">());</span></span>
<span class="line"><span style="color:#FF79C6">    return</span><span style="color:#F8F8F2"> Status</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">OK;</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">void</span><span style="color:#50FA7B"> RunServer</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F8F8F2">  std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">string </span><span style="color:#50FA7B">server_address</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">0.0.0.0:50051</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">  GreeterServiceImpl service;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">  ServerBuilder builder;</span></span>
<span class="line"><span style="color:#F8F8F2">  builder.</span><span style="color:#50FA7B">AddListeningPort</span><span style="color:#F8F8F2">(server_address, grpc</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">InsecureServerCredentials</span><span style="color:#F8F8F2">());</span></span>
<span class="line"><span style="color:#F8F8F2">  builder.</span><span style="color:#50FA7B">RegisterService</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">service);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">  std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">unique_ptr</span><span style="color:#FF79C6">&#x3C;</span><span style="color:#F8F8F2">Server</span><span style="color:#FF79C6">></span><span style="color:#50FA7B"> server</span><span style="color:#F8F8F2">(builder.</span><span style="color:#50FA7B">BuildAndStart</span><span style="color:#F8F8F2">());</span></span>
<span class="line"><span style="color:#F8F8F2">  std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">cout </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">Server listening on </span><span style="color:#E9F284">"</span><span style="color:#FF79C6"> &#x3C;&#x3C;</span><span style="color:#F8F8F2"> server_address </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">endl;</span></span>
<span class="line"><span style="color:#F8F8F2">  server</span><span style="color:#FF79C6">-></span><span style="color:#50FA7B">Wait</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">int</span><span style="color:#50FA7B"> main</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">int</span><span style="color:#FFB86C;font-style:italic"> argc</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">char**</span><span style="color:#FFB86C;font-style:italic"> argv</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#50FA7B">  RunServer</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#FF79C6">  return</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre>
<h2 id="grpc-c-client">gRPC C++ Client</h2>
<p>Similarly, to create a gRPC C++ client, you use the generated code from <code>protoc</code> compiler and connect to a server:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">#include</span><span style="color:#E9F284"> &#x3C;</span><span style="color:#F1FA8C">grpcpp/grpcpp.h</span><span style="color:#E9F284">></span></span>
<span class="line"><span style="color:#FF79C6">#include</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">example.grpc.pb.h</span><span style="color:#E9F284">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> grpc</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">Channel;</span></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> grpc</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">ClientContext;</span></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> grpc</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">Status;</span></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> example</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">HelloRequest;</span></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> example</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">HelloReply;</span></span>
<span class="line"><span style="color:#FF79C6">using</span><span style="color:#F8F8F2"> example</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">Greeter;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">class</span><span style="color:#8BE9FD"> GreeterClient</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6"> public:</span></span>
<span class="line"><span style="color:#50FA7B">  GreeterClient</span><span style="color:#F8F8F2">(std</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">shared_ptr</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#8BE9FD;font-style:italic">Channel</span><span style="color:#F8F8F2">> </span><span style="color:#FFB86C;font-style:italic">channel</span><span style="color:#F8F8F2">) : </span><span style="color:#50FA7B">stub_</span><span style="color:#F8F8F2">(Greeter</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">NewStub</span><span style="color:#F8F8F2">(channel)) {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">  std</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">string</span><span style="color:#50FA7B"> SayHello</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#8BE9FD;font-style:italic">string</span><span style="color:#FF79C6">&#x26;</span><span style="color:#FFB86C;font-style:italic"> user</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">    HelloRequest request;</span></span>
<span class="line"><span style="color:#F8F8F2">    request.</span><span style="color:#50FA7B">set_name</span><span style="color:#F8F8F2">(user);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">    HelloReply reply;</span></span>
<span class="line"><span style="color:#F8F8F2">    ClientContext context;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">    Status status </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> stub_</span><span style="color:#FF79C6">-></span><span style="color:#50FA7B">SayHello</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">context, request, </span><span style="color:#FF79C6">&#x26;</span><span style="color:#F8F8F2">reply);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> (status.</span><span style="color:#50FA7B">ok</span><span style="color:#F8F8F2">()) {</span></span>
<span class="line"><span style="color:#FF79C6">      return</span><span style="color:#F8F8F2"> reply.</span><span style="color:#50FA7B">message</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">    } </span><span style="color:#FF79C6">else</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">      std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">cout </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">RPC failed</span><span style="color:#E9F284">"</span><span style="color:#FF79C6"> &#x3C;&#x3C;</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">endl;</span></span>
<span class="line"><span style="color:#FF79C6">      return</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">RPC failed</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6"> private:</span></span>
<span class="line"><span style="color:#F8F8F2">  std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">unique_ptr</span><span style="color:#FF79C6">&#x3C;</span><span style="color:#F8F8F2">Greeter</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">Stub</span><span style="color:#FF79C6">></span><span style="color:#F8F8F2"> stub_;</span></span>
<span class="line"><span style="color:#F8F8F2">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">int</span><span style="color:#50FA7B"> main</span><span style="color:#F8F8F2">(</span><span style="color:#FF79C6">int</span><span style="color:#FFB86C;font-style:italic"> argc</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">char**</span><span style="color:#FFB86C;font-style:italic"> argv</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">  GreeterClient </span><span style="color:#50FA7B">greeter</span><span style="color:#F8F8F2">(grpc</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">CreateChannel</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">localhost:50051</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">, grpc</span><span style="color:#FF79C6">::</span><span style="color:#50FA7B">InsecureChannelCredentials</span><span style="color:#F8F8F2">()));</span></span>
<span class="line"><span style="color:#F8F8F2">  std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">string </span><span style="color:#50FA7B">user</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">world</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">  std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">string reply </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> greeter.</span><span style="color:#50FA7B">SayHello</span><span style="color:#F8F8F2">(user);</span></span>
<span class="line"><span style="color:#F8F8F2">  std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">cout </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">Greeter received: </span><span style="color:#E9F284">"</span><span style="color:#FF79C6"> &#x3C;&#x3C;</span><span style="color:#F8F8F2"> reply </span><span style="color:#FF79C6">&#x3C;&#x3C;</span><span style="color:#F8F8F2"> std</span><span style="color:#FF79C6">::</span><span style="color:#F8F8F2">endl;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  return</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span></code></pre>
<p>This is a basic example demonstrating the client-server communication using gRPC in C++. More advanced features like bi-directional streaming, error handling, and authentication can also be used in gRPC. For more information, you can refer to the <a href="https://grpc.io/docs/languages/cpp/" rel="noopener noreferrer nofollow" target="_blank">gRPC C++ documentation</a>.</p>
<h1 id="validate">validate()</h1>
<p>The <code>validate</code> command is used to examine a MongoDB collection to verify and report on the correctness of its internal structures, such as indexes, namespace details, or documents. This command can also return statistics about the storage and distribution of data within a collection.</p>
<h2 id="usage">Usage</h2>
<p>The basic syntax of the <code>validate</code> command is as follows:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">db.</span><span style="color:#50FA7B">runCommand</span><span style="color:#F8F8F2">({validate</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> "</span><span style="color:#F1FA8C">&#x3C;collection_name></span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">, options</span><span style="color:#FF79C6">...</span><span style="color:#F8F8F2">})</span></span></code></pre>
<p><code>&#x3C;collection_name></code> is the name of the collection to be validated.</p>
<h2 id="options">Options</h2>
<ul>
<li>
<p><code>full</code>: (default: false) When set to true, the <code>validate</code> command conducts a more thorough inspection of the collection, looking through all its extents, which are contiguous sections of the collection’s data on disk. This option should be used with caution as it may impact read and write performance.</p>
</li>
<li>
<p><code>background</code>: (default: false) When set to true, the <code>validate</code> command runs in the background, allowing other read and write operations on the collection to proceed concurrently. This option is beneficial for large collections, as it minimizes the impact on system performance.</p>
</li>
</ul>
<h2 id="example">Example</h2>
<p>Validate a collection named “products”:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">db.</span><span style="color:#50FA7B">runCommand</span><span style="color:#F8F8F2">({ validate</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">products</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> });</span></span></code></pre>
<p>Validate the collection and perform a background and full check:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">db.</span><span style="color:#50FA7B">runCommand</span><span style="color:#F8F8F2">({ validate</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">products</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, background</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">, full</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2"> });</span></span></code></pre>
<h2 id="output">Output</h2>
<p>The <code>validate</code> command returns an object that contains information about the validation process and its results.</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">{</span></span>
<span class="line"><span style="color:#E9F284">    "</span><span style="color:#F1FA8C">ns</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">: &#x3C;</span><span style="color:#FF79C6">string</span><span style="color:#F8F8F2">>, // Namespace of the validated collection</span></span>
<span class="line"><span style="color:#F8F8F2">    "nIndexes": &#x3C;</span><span style="color:#FF79C6">number</span><span style="color:#F8F8F2">>, // Number of indexes in the collection</span></span>
<span class="line"><span style="color:#F8F8F2">    "keysPerIndex": </span><span style="color:#FF79C6">{</span></span>
<span class="line"><span style="color:#F8F8F2">        &#x3C;</span><span style="color:#8BE9FD;font-style:italic">index_name</span><span style="color:#F8F8F2">>: &#x3C;</span><span style="color:#FF79C6">number</span><span style="color:#F8F8F2">> // Number of keys per index</span></span>
<span class="line"><span style="color:#F8F8F2">    },</span></span>
<span class="line"><span style="color:#F8F8F2">    "valid": &#x3C;</span><span style="color:#FF79C6">boolean</span><span style="color:#F8F8F2">>, // If true, the collection is valid</span></span>
<span class="line"><span style="color:#F8F8F2">    "errors": [&#x3C;</span><span style="color:#FF79C6">string</span><span style="color:#F8F8F2">>, ...], // Array of error messages, if any</span></span>
<span class="line"><span style="color:#F8F8F2">    "warnings": [&#x3C;</span><span style="color:#FF79C6">string</span><span style="color:#F8F8F2">>, ...], // Array of warning messages, if any</span></span>
<span class="line"><span style="color:#F8F8F2">    "ok": &#x3C;</span><span style="color:#FF79C6">number</span><span style="color:#F8F8F2">> // If 1, the validation command executed successfully</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Keep in mind that the <code>validate</code> command should be used mainly for diagnostics and troubleshooting purposes, as it can impact system performance when validating large collections or when using the <code>full</code> flag. Use it when you suspect that there might be corruption or discrepancies within the collection’s data or internal structures.</p>
<p>That’s all about the <code>validate</code> command. Now you know how to check the correctness of your MongoDB collections and gather important statistics about their internal structures.</p>
<h1 id="decimal128">Decimal128</h1>
<p><code>Decimal128</code> is a high-precision 128-bit decimal-based floating-point data type in MongoDB. It provides greater precision and a larger range for storing decimal numbers compared to other common floating-point data types like <code>Double</code>.</p>
<h2 id="key-features">Key Features</h2>
<ul>
<li><strong>Precision</strong>: Decimal128 allows for precise storage of decimal numbers with up to 34 decimal points, making it suitable for financial and scientific applications where exact calculations are crucial.</li>
<li><strong>Range</strong>: Decimal128 supports a wide range of values, ranging from -10^6145 to 10^6145, as well as the smallest non-zero positive and negative numbers around ±10^-6143.</li>
<li><strong>IEEE 754-2008 compliant</strong>: Decimal128 follows the decimal floating-point arithmetic encoding set by the IEEE 754-2008 international standard, ensuring consistent and accurate results across diverse platforms and systems.</li>
</ul>
<h2 id="usage">Usage</h2>
<p>To specify a <code>Decimal128</code> value in MongoDB, use the <code>$numberDecimal</code> keyword followed by the decimal value enclosed in quotes. Here’s an example demonstrating the insertion of a decimal128 data type:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" lang="javascript"><code><span class="line"><span style="color:#F8F8F2">db.example.</span><span style="color:#50FA7B">insertOne</span><span style="color:#F8F8F2">({</span></span>
<span class="line"><span style="color:#F8F8F2">  amount</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">    $numberDecimal</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">1234.567890123456789012345678901234</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  },</span></span>
<span class="line"><span style="color:#F8F8F2">});</span></span></code></pre>
<p>Alternatively, with the help of the JavaScript BSON library, you can use the <code>Decimal128.fromString()</code> function to create a Decimal128 value from a string:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" lang="javascript"><code><span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> { Decimal128 } </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> require</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">bson</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> decimalValue </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Decimal128.</span><span style="color:#50FA7B">fromString</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#E9F284">  '</span><span style="color:#F1FA8C">1234.567890123456789012345678901234</span><span style="color:#E9F284">'</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">db.example.</span><span style="color:#50FA7B">insertOne</span><span style="color:#F8F8F2">({ amount</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> decimalValue });</span></span></code></pre>
<h2 id="considerations">Considerations</h2>
<ul>
<li>When querying decimal values, note that MongoDB compares decimal numbers using their mathematical values, rather than their string representation.</li>
<li>Due to the high precision of the <code>Decimal128</code> data type, you may encounter rounding differences between MongoDB and other systems or libraries when performing calculations involving mixed data types. To mitigate this, ensure that all operands are converted to the same data type (preferably, <code>Decimal128</code>) before performing calculations.</li>
</ul>
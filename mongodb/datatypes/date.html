<h1 id="date">Date</h1>
<p>In MongoDB, the <em>Date</em> datatype is used to store the date and time values in a specific format. This is essential when working with date-based data, such as recording timestamps, scheduling events, or organizing data based on time.</p>
<h2 id="date-format">Date Format</h2>
<p>MongoDB internally stores dates as the number of milliseconds since the Unix epoch (January 1, 1970). This BSON data format makes it efficient for storing and querying date values. However, when working with dates in your application, it is common to use a human-readable format such as ISO 8601.</p>
<h2 id="working-with-date">Working with Date</h2>
<p>To create a new Date instance, you can use the JavaScript <code>Date</code> object. Here’s an example:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> currentDate </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6;font-weight:bold"> new</span><span style="color:#50FA7B"> Date</span><span style="color:#F8F8F2">();</span></span></code></pre>
<p>When inserting a document with a Date field, you can store the date value as follows:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">db.events.</span><span style="color:#50FA7B">insertOne</span><span style="color:#F8F8F2">({ title</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Sample Event</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, eventDate</span><span style="color:#FF79C6">:</span><span style="color:#FF79C6;font-weight:bold"> new</span><span style="color:#50FA7B"> Date</span><span style="color:#F8F8F2">() });</span></span></code></pre>
<p>You can also store the current date and time using MongoDB’s <code>$currentDate</code> operator when updating a document:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">db.events.</span><span style="color:#50FA7B">updateOne</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">  { _id</span><span style="color:#FF79C6">:</span><span style="color:#50FA7B"> ObjectId</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">your_document_id</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">) },</span></span>
<span class="line"><span style="color:#F8F8F2">  {</span></span>
<span class="line"><span style="color:#F8F8F2">    $set</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">      title</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Sample Event</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">      eventDate</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { $currentDate</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { $type</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">date</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> } }</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span></code></pre>
<h2 id="querying-dates">Querying Dates</h2>
<p>To query documents based on date values, you can perform comparisons using various query operators such as <code>$lt</code>, <code>$lte</code>, <code>$gt</code>, <code>$gte</code>, and <code>$eq</code>. Here are some examples:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6272A4">// Find events that are happening before a certain date</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> filterDate </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6;font-weight:bold"> new</span><span style="color:#50FA7B"> Date</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">2021-12-31</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">db.events.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">({ eventDate</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { $lt</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> filterDate } });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// Find events that are happening after a certain date</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> filterDate </span><span style="color:#FF79C6">=</span><span style="color:#FF79C6;font-weight:bold"> new</span><span style="color:#50FA7B"> Date</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">2022-01-01</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">db.events.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">({ eventDate</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { $gt</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> filterDate } });</span></span></code></pre>
<h2 id="date-aggregations">Date Aggregations</h2>
<p>MongoDB also provides aggregation functions for working with date values. Some common operations include <code>$year</code>, <code>$month</code>, <code>$dayOfMonth</code>, <code>$hour</code>, and <code>$minute</code>.</p>
<p>Example using the <code>$dayOfYear</code> and <code>$year</code> operators:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">db.events.</span><span style="color:#50FA7B">aggregate</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#F8F8F2">  {</span></span>
<span class="line"><span style="color:#F8F8F2">    $group</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">      _id</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">        year</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { $year</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">$eventDate</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> },</span></span>
<span class="line"><span style="color:#F8F8F2">        day</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { $dayOfYear</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">$eventDate</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> },</span></span>
<span class="line"><span style="color:#F8F8F2">      },</span></span>
<span class="line"><span style="color:#F8F8F2">      count</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { $sum</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2"> },</span></span>
<span class="line"><span style="color:#F8F8F2">    },</span></span>
<span class="line"><span style="color:#F8F8F2">  },</span></span>
<span class="line"><span style="color:#F8F8F2">]);</span></span></code></pre>
<p>This query groups events by the day and year, providing a count of events for each day.</p>
<ul>
<li><a href="https://www.mongodb.com/docs/manual/reference/method/date/" rel="noopener noreferrer nofollow" target="_blank">MongoDB Documentation Date</a></li>
</ul>
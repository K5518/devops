<h1 id="array-operators">Array Operators</h1>
<p>In MongoDB, array operators allow you to perform various operations on arrays within documents. These operators help you query and manipulate the elements in the array fields of your collections. Let’s go through some of the most commonly used array operators:</p>
<h2 id="elemmatch"><code>$elemMatch</code></h2>
<p>The <code>$elemMatch</code> operator is used to match one or more array elements that satisfy the given query condition(s). It returns the documents where the array field has at least one matching element.</p>
<p><strong>Example:</strong></p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" lang="javascript"><code><span class="line"><span style="color:#F8F8F2">db.collection.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">({ scores</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { $elemMatch</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { $gte</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 80</span><span style="color:#F8F8F2">, $lt</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 90</span><span style="color:#F8F8F2"> } } });</span></span></code></pre>
<p>This query returns all documents where the <code>scores</code> array has at least one element between 80 and 90.</p>
<h2 id="all"><code>$all</code></h2>
<p>The <code>$all</code> operator is used to match arrays that contain all the specified query elements. It returns documents where the array field has all the given elements, irrespective of their order.</p>
<p><strong>Example:</strong></p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" lang="javascript"><code><span class="line"><span style="color:#F8F8F2">db.collection.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">({ tags</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { $all</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">mongodb</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">database</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">] } });</span></span></code></pre>
<p>This query returns all documents where the <code>tags</code> array contains both “mongodb” and “database”.</p>
<h2 id="size"><code>$size</code></h2>
<p>The <code>$size</code> operator is used to match arrays that have the specified number of elements. It returns documents where the array field has the given size.</p>
<p><strong>Example:</strong></p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" lang="javascript"><code><span class="line"><span style="color:#F8F8F2">db.collection.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">({ comments</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { $size</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2"> } });</span></span></code></pre>
<p>This query returns all documents where the <code>comments</code> array contains exactly 3 elements.</p>
<h2 id="addtoset"><code>$addToSet</code></h2>
<p>The <code>$addToSet</code> operator is used to add unique values to an array field. If the value doesn’t exist in the array, it will be added; otherwise, the array remains unchanged.</p>
<p><strong>Example:</strong></p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" lang="javascript"><code><span class="line"><span style="color:#F8F8F2">db.collection.</span><span style="color:#50FA7B">updateOne</span><span style="color:#F8F8F2">({ _id</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2"> }, { $addToSet</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { colors</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">green</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> } });</span></span></code></pre>
<p>This query adds “green” to the <code>colors</code> array in the document with <code>_id</code> equal to 1, only if it’s not already present.</p>
<h2 id="push"><code>$push</code></h2>
<p>The <code>$push</code> operator is used to add values to an array field. It adds the value to the array, even if it exists already.</p>
<p><strong>Example:</strong></p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0" lang="javascript"><code><span class="line"><span style="color:#F8F8F2">db.collection.</span><span style="color:#50FA7B">updateOne</span><span style="color:#F8F8F2">({ _id</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2"> }, { $push</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { comments</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Great article!</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> } });</span></span></code></pre>
<p>This query adds “Great article!” to the <code>comments</code> array in the document with <code>_id</code> equal to 1.</p>
<p>Remember that there are several other array operators available in MongoDB, but the ones mentioned above are the most commonly used. You can always refer to the <a href="https://docs.mongodb.com/manual/reference/operator/query-array/" rel="noopener noreferrer nofollow" target="_blank">MongoDB documentation</a> for more information on array operators.</p>
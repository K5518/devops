<div data-github-url="https://github.com/kamranahmedse/developer-roadmap/tree/master/src/data/roadmaps/sql/content/113-stored-procedures-functions.md"></div> <h1 id="stored-procedures-and-functions">Stored Procedures and Functions</h1>
<p>A SQL stored procedure is a set of SQL code that can be saved and reused. In other words, it’s a precompiled object because it’s compiled at a time when it’s created on the database. Stored procedures can take parameters, process the tasks or query the database, and return a result.</p>
<p>Here’s a basic example:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> PROCEDURE</span><span style="color:#F8F8F2"> getEmployeesBySalary</span></span>
<span class="line"><span style="color:#F8F8F2">  @minSalary </span><span style="color:#FF79C6">int</span></span>
<span class="line"><span style="color:#FF79C6">AS</span></span>
<span class="line"><span style="color:#FF79C6">BEGIN</span></span>
<span class="line"><span style="color:#FF79C6">  SELECT</span><span style="color:#F8F8F2"> firstName, lastName</span></span>
<span class="line"><span style="color:#FF79C6">  FROM</span><span style="color:#F8F8F2"> Employees</span></span>
<span class="line"><span style="color:#FF79C6">  WHERE</span><span style="color:#F8F8F2"> salary </span><span style="color:#FF79C6">></span><span style="color:#F8F8F2"> @minSalary</span></span>
<span class="line"><span style="color:#FF79C6">END</span></span>
<span class="line"><span style="color:#FF79C6">GO</span></span>
<span class="line"></span></code></pre>
<p>To call this stored procedure, we would use:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">EXEC</span><span style="color:#F8F8F2"> getEmployeesBySalary </span><span style="color:#BD93F9">50000</span></span>
<span class="line"></span></code></pre>
<h2 id="functions">Functions</h2>
<p>A SQL function is a set of SQL statements that perform a specific task. Functions must return a value or result. We can use these functions in SELECT, INSERT, DELETE, UPDATE statements.</p>
<p>There are two types of functions in SQL:</p>
<ul>
<li><strong>Scalar functions</strong>, which return a single value and can be used where single expressions are used. For instance:</li>
</ul>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> FUNCTION</span><span style="color:#50FA7B"> addNumbers</span><span style="color:#F8F8F2">(@a </span><span style="color:#FF79C6">int</span><span style="color:#F8F8F2">, @b </span><span style="color:#FF79C6">int</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">RETURNS</span><span style="color:#FF79C6"> int</span><span style="color:#F8F8F2"> </span></span>
<span class="line"><span style="color:#FF79C6">AS</span><span style="color:#F8F8F2"> </span></span>
<span class="line"><span style="color:#FF79C6">BEGIN</span></span>
<span class="line"><span style="color:#FF79C6">   RETURN</span><span style="color:#F8F8F2"> @a </span><span style="color:#FF79C6">+</span><span style="color:#F8F8F2"> @b</span></span>
<span class="line"><span style="color:#FF79C6">END</span></span>
<span class="line"></span></code></pre>
<ul>
<li><strong>Table-valued functions</strong>, which return a table. They can be used in JOIN clauses as if they were a normal table. For example:</li>
</ul>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">CREATE</span><span style="color:#FF79C6"> FUNCTION</span><span style="color:#50FA7B"> getBooks</span><span style="color:#F8F8F2"> (@authorID </span><span style="color:#FF79C6">INT</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#FF79C6">RETURNS</span><span style="color:#FF79C6"> TABLE</span></span>
<span class="line"><span style="color:#FF79C6">AS</span><span style="color:#F8F8F2"> </span></span>
<span class="line"><span style="color:#FF79C6">RETURN</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#FF79C6">   SELECT</span><span style="color:#BD93F9"> books</span><span style="color:#F8F8F2">.</span><span style="color:#BD93F9">title</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">books</span><span style="color:#F8F8F2">.</span><span style="color:#BD93F9">publicationYear</span><span style="color:#F8F8F2"> </span></span>
<span class="line"><span style="color:#FF79C6">   FROM</span><span style="color:#F8F8F2"> books </span></span>
<span class="line"><span style="color:#FF79C6">   WHERE</span><span style="color:#BD93F9"> books</span><span style="color:#F8F8F2">.</span><span style="color:#BD93F9">authorID</span><span style="color:#FF79C6"> =</span><span style="color:#F8F8F2"> @authorID</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span></code></pre>
<p>To call this function:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">SELECT</span><span style="color:#F8F8F2"> title, publicationYear </span></span>
<span class="line"><span style="color:#FF79C6">FROM</span><span style="color:#F8F8F2"> getBooks(</span><span style="color:#BD93F9">3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span></code></pre>